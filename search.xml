<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ROSå­¦ä¹ ï¼ˆä¸€ï¼‰è¯é¢˜é€šä¿¡</title>
      <link href="/2025/08/30/ROS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E8%AF%9D%E9%A2%98%E9%80%9A%E4%BF%A1/"/>
      <url>/2025/08/30/ROS%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E8%AF%9D%E9%A2%98%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<h1>è¯é¢˜é€šä¿¡çš„æ„ä¹‰</h1><p>ä¸ºäº†è·å–å‘¨å›´çš„ä¿¡æ¯ï¼ˆä¼ æ„Ÿå™¨ã€ç›¸å…³æ•°æ®ï¼‰ï¼ŒROS2å¼•å…¥äº†ä¸“é—¨çš„è®¢é˜…å‘å¸ƒæœºåˆ¶ï¼Œæ˜¯ROSä¸­æœ€å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ä¹‹ä¸€ã€‚</p><h1>åœ¨å‘½ä»¤è¡Œé‡Œå‘å¸ƒè¯é¢˜</h1><p>æ­¤å¤„ä»¥å°æµ·é¾Ÿæ¨¡æ‹Ÿå™¨ä¸ºä¾‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ros2 node info /turtlesim <span class="comment">#ç”¨äºæŸ¥çœ‹èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯ </span></span><br><span class="line"><span class="comment">#Subscribers:å…¶è®¢é˜…çš„æ‰€æœ‰è¯é¢˜ï¼›</span></span><br><span class="line"><span class="comment">#Publishersï¼šèŠ‚ç‚¹å‘å¸ƒçš„æ‰€æœ‰è¯é¢˜ </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros2 topic echo /turtle1/pose<span class="comment">#ç”¨äºè¾“å‡ºè¯é¢˜æ•°æ®çš„å‘½ä»¤</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros2 topic info /turtle1/cmd_vel -v<span class="comment">#ç”¨äºæŸ¥çœ‹æŸä¸ªè¯é¢˜çš„å…·ä½“ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros2 interface show geometry_msgs/msg/Twist<span class="comment">#ç”¨äºè¾“å‡ºæ¥å£çš„å®šä¹‰å†…å®¹</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist <span class="string">&quot;&#123;linear: &#123;x: 1.0&#125;&#125;&quot;</span></span><br><span class="line"><span class="comment">#ä»¥çº¿é€Ÿåº¦1.0m/så‘å³ç›´è¡Œ</span></span><br></pre></td></tr></table></figure><h1>ä½¿ç”¨Pythonå‘å¸ƒä¸è®¢é˜…è¯é¢˜</h1><h2 id="ä½¿ç”¨Pythonå‘å¸ƒè¯é¢˜">ä½¿ç”¨Pythonå‘å¸ƒè¯é¢˜</h2><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œvscodeæ‰“å¼€ï¼Œç„¶åè¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtopic_wsï¼Œåœ¨ä¸‹é¢åˆ›å»ºsrcç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œåˆ›å»ºdemo_python_topicåŠŸèƒ½åŒ…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros2 pkg create demo_python_topic --build-<span class="built_in">type</span> ament_python --dependencies rclpy example_interfaces --license Apache-<span class="number">2.0</span></span><br><span class="line"><span class="comment">#åˆ›å»ºdemo_python_topicåŠŸèƒ½åŒ…</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºnovel_pub_node.pyæ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> rclpy</span><br><span class="line"><span class="keyword">from</span> rclpy.node <span class="keyword">import</span> Node </span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> example_interfaces.msg <span class="keyword">import</span> String</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NovelPubNode</span>(<span class="title class_ inherited__">Node</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,node_name</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(node_name)</span><br><span class="line">        self.novels_queue_=Queue()<span class="comment">#åˆ›å»ºé˜Ÿåˆ—ï¼Œå­˜æ”¾å°è¯´</span></span><br><span class="line">        self.novel_publisher_=self.create_publisher(String,<span class="string">&#x27;novel&#x27;</span>,<span class="number">10</span>)</span><br><span class="line">        <span class="comment">#åˆ›å»ºè¯é¢˜å‘å¸ƒè€…ï¼Œå‘å¸ƒå°è¯´</span></span><br><span class="line">        self.timer_=self.create_timer(<span class="number">5</span>,self.timer_callback)<span class="comment">#åˆ›å»ºå®šæ—¶å™¨</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_novel</span>(<span class="params">self,url</span>):</span><br><span class="line">        response =requests.get(url)</span><br><span class="line">        response.encoding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">        self.get_logger().info(<span class="string">f&#x27;ä¸‹è½½å®Œæˆ:<span class="subst">&#123;url&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> response.text.splitlines():</span><br><span class="line">            self.novels_queue_.put(line)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">timer_callback</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.novels_queue_.qsize() &gt;<span class="number">0</span> : </span><br><span class="line">            msg = String()<span class="comment">#å®ä¾‹åŒ–ä¸€ä¸ªä¿¡æ¯p[p]</span></span><br><span class="line">            msg.data = self.novels_queue_.get()<span class="comment">#</span></span><br><span class="line">            self.novel_publisher_.publish(msg)</span><br><span class="line">            self.get_logger().info(<span class="string">f&#x27;å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼š<span class="subst">&#123;msg.data&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    rclpy.init()</span><br><span class="line">    node =NovelPubNode(<span class="string">&#x27;novel_pub&#x27;</span>)</span><br><span class="line">    node.download_novel(<span class="string">&#x27;http://localhost:8000/novel1.txt&#x27;</span>)</span><br><span class="line">    rclpy.spin(node)</span><br><span class="line">    rclpy.shutdown()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨setup.pyä¸­æ·»åŠ å¯åŠ¨è¯­å¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#...</span></span><br><span class="line">entry_points=&#123;</span><br><span class="line">     <span class="string">&#x27;console_scripts&#x27;</span>: [</span><br><span class="line">         <span class="string">&#x27;novel_pub_node = demo_python_topic.novel_pub_node:main&#x27;</span>,</span><br><span class="line">     ],</span><br><span class="line">    <span class="comment">#åœ¨è¿™é‡Œæ·»åŠ æ„å»ºè¯­å¥</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼ˆç›¸å½“äºä¸€ä¸ªæ˜¯å‘å¸ƒè€…ï¼Œä¸€ä¸ªæ˜¯è®¢é˜…è€…ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server <span class="number">8000</span><span class="comment">#æ‰“å¼€http</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ï¼Œè¿è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">colcon build<span class="comment">#ç¼–è¯‘</span></span><br><span class="line">source install/setup.bash</span><br><span class="line">ros2 run demo_python_topic novel_pub_node<span class="comment">#è¿è¡Œç¨‹åº</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ä¸‹è½½srcç›®å½•ä¸‹æ„å»ºçš„novel1.txtæ–‡ä»¶é‡Œçš„å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[INFO] [1756389267.525765835] [novel_pub]: ä¸‹è½½å®Œæˆ:http://localhost:8000/novel1.txt</span><br><span class="line">[INFO] [1756389272.173843085] [novel_pub]: å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼šè¿™æ˜¯ä¸€ä¸ªç¾ä¸½çš„æ•…äº‹å¼€å§‹ã€‚</span><br><span class="line">[INFO] [1756389277.174012442] [novel_pub]: å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼šä¸»äººå…¬è¸ä¸Šäº†å†’é™©çš„æ—…ç¨‹ã€‚</span><br><span class="line">[INFO] [1756389282.181176548] [novel_pub]: å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼šä»–é‡åˆ°äº†è®¸å¤šæœ‰è¶£çš„äººç‰©ã€‚</span><br><span class="line">8[INFO] [1756389287.174946628] [novel_pub]: å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼šæ¯ä¸ªç« èŠ‚éƒ½å……æ»¡äº†æƒŠå–œå’ŒæŒ‘æˆ˜ã€‚</span><br><span class="line">[INFO] [1756389292.173441667] [novel_pub]: å‘å¸ƒäº†ä¸€è¡Œå°è¯´ï¼šæ•…äº‹é€æ¸å±•å¼€ï¼Œæƒ…èŠ‚è¶Šæ¥è¶Šç²¾å½©ã€‚</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨Pythonè®¢é˜…è¯é¢˜">ä½¿ç”¨Pythonè®¢é˜…è¯é¢˜</h2><p>åˆ›å»ºnovel_pub_node.pyæ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> espeakng</span><br><span class="line"><span class="keyword">import</span> rclpy</span><br><span class="line"><span class="keyword">from</span> rclpy.node <span class="keyword">import</span> Node </span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> example_interfaces.msg <span class="keyword">import</span> String</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NovelSubNode</span>(<span class="title class_ inherited__">Node</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,node_name</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(node_name)</span><br><span class="line">        self.novels_queue_=Queue()<span class="comment">#åˆ›å»ºé˜Ÿåˆ—ï¼Œå­˜æ”¾å°è¯´</span></span><br><span class="line">        self.novel_subscriber_=self.create_subscription(String,<span class="string">&#x27;novel&#x27;</span>,self.novel_callback,<span class="number">10</span>)</span><br><span class="line">        self.speech_thread_ =threading.Thread(target=self.speak_thread)</span><br><span class="line">        self.speech_thread_.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">novel_callback</span>(<span class="params">self,msg</span>):</span><br><span class="line">        self.novels_queue_.put(msg.data)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak_thread</span>(<span class="params">self</span>):</span><br><span class="line">        speaker = espeakng.Speaker()</span><br><span class="line">        speaker.voice = <span class="string">&#x27;zh&#x27;</span></span><br><span class="line">        <span class="keyword">while</span> rclpy.ok():</span><br><span class="line">            <span class="keyword">if</span> self.novels_queue_.qsize()&gt;<span class="number">0</span>:</span><br><span class="line">                text = self.novels_queue_.get()</span><br><span class="line">                self.get_logger().info(<span class="string">f&#x27;æ­£åœ¨æœ—è¯»ï¼š<span class="subst">&#123;text&#125;</span>&#x27;</span>)</span><br><span class="line">                speaker.say(text)</span><br><span class="line">                speaker.wait()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">args=<span class="literal">None</span></span>):</span><br><span class="line">    rclpy.init(args=args)</span><br><span class="line">    node =NovelSubNode(<span class="string">&#x27;novel_read&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    rclpy.spin(node)</span><br><span class="line">    rclpy.shutdown()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨setup.pyä¸­æ·»åŠ å¯åŠ¨è¯­å¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#...</span></span><br><span class="line">entry_points=&#123;</span><br><span class="line">     <span class="string">&#x27;console_scripts&#x27;</span>: [</span><br><span class="line">         <span class="string">&#x27;novel_pub_node = demo_python_topic.novel_pub_node:main&#x27;</span>,\</span><br><span class="line">         <span class="string">&#x27;novel_sub_node = demo_python_topic.novel_sub_node:main&#x27;</span>,</span><br><span class="line">     ],</span><br><span class="line">    <span class="comment">#åœ¨è¿™é‡Œæ·»åŠ æ„å»ºè¯­å¥</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å‘å¸ƒè€…å’Œæ¥æ”¶è€…çš„å‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros2 topic <span class="built_in">list</span> -v</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Published topics:</span><br><span class="line"> * /novel [example_interfaces/msg/String] 1 publisher</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Subscribed topics:</span><br><span class="line"> * /novel [example_interfaces/msg/String] 1 subscriber</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå·²ç»å®Œæˆpythonçš„æ‰€æœ‰çš„å‘å¸ƒä¸è®¢é˜…æµç¨‹ã€‚</p><h2 id="å¯å‚è€ƒå…¶ä»–æ–‡ç« ï¼š">å¯å‚è€ƒå…¶ä»–æ–‡ç« ï¼š</h2><p><a href="https://zhuanlan.zhihu.com/p/23645180597">(20 å°ç§ä¿¡ / 80 æ¡æ¶ˆæ¯) ROS2ä¹‹ç¬¬2è®²â€“è¯é¢˜ï¼ˆtopicï¼‰ç¨‹åºçš„ç¼–å†™ - çŸ¥ä¹</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆä¸ƒï¼‰å®šæ—¶å™¨</title>
      <link href="/2024/07/11/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89%E5%AE%9A%E6%97%B6%E5%99%A8/"/>
      <url>/2024/07/11/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1>åŸºæœ¬å®šæ—¶å™¨</h1><p>å®šæ—¶å™¨å°±æ˜¯è®¡æ•°å™¨ã€‚ä»¥ä¸‹æ˜¯åŸºæœ¬å®šæ—¶å™¨çš„å†…å®¹å’Œç›¸å…³HALåº“å‡½æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226562.png" alt="æ™®é€šæ¨¡å¼"></p><h1>ä»£ç å®è·µä¸€</h1><p>å®è·µä¸€ï¼šå®šæ—¶å™¨å®ç°å®šæ—¶å‘é€æ•°æ®</p><p>é…ç½®ç•Œé¢å¦‚ä¸‹ï¼š</p><p>**ï¼ˆ1ï¼‰**Prescalerï¼šå¯¹äºåˆ†é¢‘å™¨çš„è®¾ç½®</p><p>â€‹          Counter Periodï¼šå¯¹äºè‡ªåŠ¨é‡è£…è½½å¯„å­˜å™¨çš„å€¼ï¼Œè®¡æ•°å‘¨æœŸï¼Œç”¨äºè®¡ç®—æ—¶é—´å‘¨æœŸ</p><p>â€‹          auto-reload preloadï¼šè‡ªåŠ¨é‡è£…è½½çš„å½±å­å¯„å­˜å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226332.png" alt="æ™®é€šæ¨¡å¼é…ç½®1"></p><p>**ï¼ˆ2ï¼‰**å¼€å¯ä¸²å£</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226238.png" alt="æ™®é€šæ¨¡å¼é…ç½®2"></p><p>**ï¼ˆ3ï¼‰**å¼€å¯ä¸²å£</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226250.png" alt="æ™®é€šæ¨¡å¼é…ç½®3"></p><p>æ‰€ç”¨çš„HALåº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HAL_TIM_Base_Start_IT(&amp;htim4);//ä¸­æ–­æ¨¡å¼å¼€å¯å®šæ—¶å™¨ï¼ˆ-ITï¼‰</span><br><span class="line"></span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)</span><br><span class="line">//å®šæ—¶å™¨æ›´æ–°ä¸­æ–­å‡½æ•°ï¼Œåœ¨åˆ°è¾¾è®¾å®šçš„æ•°å€¼æ—¶ï¼Œå¯åŠ¨è¯¥å‡½æ•°ï¼Œé‡æ–°è®¡æ•°</span><br><span class="line"></span><br><span class="line">__HAL_TIM_GetCounter(&amp;htim4)//ç”¨ä¸€ä¸ªå˜é‡è·å–å®šæ—¶å™¨çš„æ•°æ®</span><br></pre></td></tr></table></figure><p>å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN Includes */</span><br><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line">#include &quot;string.h&quot;//åŒ…å«ç›¸åº”çš„å¤´æ–‡ä»¶</span><br><span class="line">/* USER CODE END Includes */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN PFP */</span><br><span class="line">  char date[]=&quot;ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š&quot;;</span><br><span class="line">/* USER CODE END PFP */</span><br><span class="line"></span><br><span class="line">/* Private user code ---------------------------------------------------------*/</span><br><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&#123;</span><br><span class="line">  if(htim==&amp;htim4)//åˆ¤æ–­ä¸€ä¸‹å¯ä»¥åˆ¤æ–­ç›¸å…³çš„</span><br><span class="line">  &#123;</span><br><span class="line">HAL_UART_Transmit_IT(&amp;huart1,(uint8_t*)date,strlen(date));//ä¸²å£å‘é€ç›¸å…³çš„æ•°æ®</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"> /* USER CODE BEGIN 2 */</span><br><span class="line">    HAL_TIM_Base_Start_IT(&amp;htim4);//å¯åŠ¨ç›¸å…³çš„å®šæ—¶å™¨çš„å£å­</span><br><span class="line">    int counter = 0;</span><br><span class="line">    char message[20];</span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">counter =__HAL_TIM_GetCounter(&amp;htim4);</span><br><span class="line">sprintf(message,&quot;counter: %d&quot;,counter);//æ‹¼æ¥å­—ç¬¦ä¸²</span><br><span class="line">HAL_Delay(99);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><h1>é€šç”¨/é«˜çº§å®šæ—¶å™¨</h1><p>é€šç”¨ã€é«˜çº§å®šæ—¶å™¨æœ‰å››ä¸ªè¾“å…¥é€šé“ï¼š</p><p><strong>TI1-4</strong>ï¼šåªæœ‰1å’Œ2æ¥å…¥è§¦å‘å™¨ï¼ŒTI1FP1ã€TI2FP2å¯ä»¥é€‰æ‹©ä¸Šã€ä¸‹ã€åŒè¾¹æ²¿è§¦å‘ï¼ŒTI1_EDåªèƒ½åŒè¾¹æ²¿æ£€æµ‹ã€‚</p><p>é€šè¿‡å¤–éƒ¨æ—¶é’Ÿ1è¿›å…¥ä»æ¨¡å¼æ§åˆ¶å™¨</p><p><strong>ETR</strong>ï¼šææ€§é€‰æ‹©ï¼šä¸Šå‡æ²¿è¿˜æ˜¯ä¸‹é™æ²¿</p><p>è¾¹æ²¿æ£€æµ‹ï¼šåªèƒ½å®ç°ä¸€ç§æ£€æµ‹</p><p>é¢„åˆ†é¢‘ï¼šé™ä½è¾“å…¥çš„é€Ÿåº¦</p><p>è¾“å…¥æ»¤æ³¢ï¼šæ»¤å»ä¸å¿…è¦çš„å¹²æ‰°</p><p>å¯ä»¥é€šè¿‡è§¦å‘å™¨è¿›å…¥ä»æ¨¡å¼æ§åˆ¶å™¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥è§¦å‘æ§åˆ¶å™¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226103.png" alt="é€šç”¨&amp;é«˜çº§æ¨¡å¼"></p><h1>ä»£ç å®è·µäºŒ</h1><p>å®è·µä¸€ï¼šå®ç°çº¢å¤–å‘å°„æ¨¡å—å®ç°è®¡æ•°é»‘ç™½æ¡çº¹åœ¨OLEDä¸Šæ˜¾ç¤º</p><p>é…ç½®ç•Œé¢å¦‚ä¸‹ï¼š</p><p>ï¼ˆ1ï¼‰é€‰æ‹©â€œå¤–éƒ¨æ—¶é’Ÿ1â€</p><p>è§¦å‘æ¨¡å¼å¯ä»¥é€‰æ‹©TI1FP1ã€TI2FP2ã€TI1_EDï¼Œç”±äºç²¾ç¡®è®¡æ•°ï¼Œæ‰€ä»¥é€‰æ‹©ä¸åˆ†é¢‘</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226531.png" alt="é€šç”¨æ¨¡å¼é…ç½®1"></p><p>ï¼ˆ2ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142226137.png" alt="é€šç”¨æ¨¡å¼é…ç½®2"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HAL_TIM_Base_Start(&amp;htim2);//é˜»å¡æ¨¡å¼ä¸‹çš„å®šæ—¶å™¨å¼€å¯æ¨¡å¼</span><br><span class="line"></span><br><span class="line">__HAL_TIM_GetCounter(&amp;htim4)//ç”¨ä¸€ä¸ªå˜é‡è·å–å®šæ—¶å™¨çš„æ•°æ®</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN Includes */</span><br><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line">#include &quot;string.h&quot;</span><br><span class="line">#include  &quot;oled.h&quot;</span><br><span class="line">/* USER CODE END Includes */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  /* USER CODE BEGIN 2 */</span><br><span class="line">         HAL_Delay(20);</span><br><span class="line">         OLED_Init();</span><br><span class="line"> HAL_TIM_Base_Start(&amp;htim2);</span><br><span class="line"> int counter=0;</span><br><span class="line"> char message[20]=&quot;&quot;;</span><br><span class="line"></span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line">  </span><br><span class="line"> ...</span><br><span class="line"> </span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">    OLED_NewFrame();</span><br><span class="line">counter=__HAL_TIM_GET_COUNTER(&amp;htim2);</span><br><span class="line">sprintf(message,&quot;counter:%d&quot;,counter);</span><br><span class="line">OLED_PrintString(10,10,message,&amp;font16x16,OLED_COLOR_NORMAL);</span><br><span class="line">    OLED_ShowFrame();</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br><span class="line">  /* USER CODE END 3 */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h1>å®šæ—¶å™¨ä»æ¨¡å¼</h1><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227796.png" alt="ä¸‰ç§æ¨¡å¼"></p><h2 id="å¤ä½æ¨¡å¼">å¤ä½æ¨¡å¼</h2><p>å®è·µ1ï¼šçº¢å¤–æ£€æµ‹è®¡æ•°ï¼Œæ¯5ç§’è‡ªåŠ¨é‡è£…è½½ï¼Œæˆ–æ˜¯å¤–éƒ¨è§¦å‘ï¼Œè¿›è¡Œä¸²å£å‘é€æ•°æ®ã€‚</p><p>å¤ä½æ¨¡å¼ä¸‹ï¼Œåœ¨æ­£å¸¸è®¡æ•°çš„æƒ…å†µä¸‹ï¼Œæ¥æ”¶åˆ°è§¦å‘ä¿¡å·å°±ä¼šä¸­æ–­ï¼Œè¿›è¡Œæ›´æ–°å®è·µï¼ŒåŒæ ·ä¼šè§¦å‘æ›´æ–°ä¸­æ–­ã€‚ï¼ˆå¦‚æœå¼€å¯ä¸­æ–­çš„æƒ…å†µä¸‹ï¼‰</p><p>é…ç½®å¦‚ä¸‹ï¼šç”±å†…éƒ¨æ—¶é’Ÿæä¾›è®¡æ—¶ï¼ˆä¹‹å‰æ‰€è¯´ETRçš„å¤–éƒ¨æ—¶é’Ÿ2çš„ä½œç”¨ä¸ä¹‹ç±»ä¼¼ï¼Œåªä¸è¿‡ä¸€ä¸ªå†…éƒ¨æ—¶é’Ÿï¼Œä¸€ä¸ªå¤–éƒ¨æ—¶é’Ÿï¼‰ï¼ˆOne  Pulse Modeä¸ç”¨å‹¾é€‰ï¼‰ï¼›å¼€å¯ç›¸åº”çš„ä¸²å£ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227135.png" alt="å¤ä½æ¨¡å¼é…ç½®"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)</span><br><span class="line">//è·å–æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">__HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">//æ¸…ç†æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)</span><br><span class="line">//ä¸­æ–­æ›´æ–°å‡½æ•°</span><br><span class="line"></span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);</span><br><span class="line">//å¼€å¯å®šæ—¶å™¨ä¸­æ–­</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">char update[]=&quot;è‡ªåŠ¨é‡è£…è½½&quot;;</span><br><span class="line">char trigger[]=&quot;ä»æ¨¡å¼è§¦å‘&quot;;</span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&#123;</span><br><span class="line">if(htim==&amp;htim2)</span><br><span class="line">&#123;</span><br><span class="line">if(__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)==SET)&#123;</span><br><span class="line">__HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">    HAL_UART_Transmit(&amp;huart1,(uint8_t*)trigger,strlen(trigger),100);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">HAL_UART_Transmit(&amp;huart1,(uint8_t*)update,strlen(update),100);</span><br><span class="line">&#125;//åˆ¤æ–­ç›¸åº”çš„æ ‡å¿—ä½ï¼Œå¹¶æ”¹å˜ä¸åŒçš„æ ‡å¿—ä½æ•°å€¼</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">  /* USER CODE BEGIN 2 */</span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);//å¼€å¯å®šæ—¶å™¨ä¸­æ–­ï¼ˆéé˜»å¡æ¨¡å¼ï¼‰</span><br><span class="line">int counter =0;</span><br><span class="line">char message[] =&quot;&quot;;</span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">counter=__HAL_TIM_GET_COUNTER(&amp;htim2);//è·å–æ•°æ®</span><br><span class="line">sprintf(message,&quot;counter:%d&quot;,counter);</span><br><span class="line">    HAL_UART_Transmit(&amp;huart1,(uint8_t*)message,strlen(message),100);</span><br><span class="line">        HAL_Delay(500);</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="é—¨æ¨¡å¼">é—¨æ¨¡å¼</h2><p>å®è·µ1ï¼šçº¢å¤–æ£€æµ‹è®¡æ•°ï¼Œæ¯5ç§’è‡ªåŠ¨é‡è£…è½½ï¼Œæˆ–æ˜¯å¤–éƒ¨è§¦å‘ï¼Œè¿›è¡Œä¸²å£å‘é€æ•°æ®ã€‚</p><p>é—¨æ¨¡å¼ä¸‹ï¼Œä¸‹é™çš„æ—¶å€™æš‚åœè®¡æ—¶ï¼Œä¸Šå‡æ—¶ç»§ç»­è®¡æ•°ï¼Œå®ç°è®¡æ•°æš‚åœã€ç»§ç»­çš„æ§åˆ¶ã€‚</p><p>é…ç½®å¦‚ä¸‹ï¼šç”±å†…éƒ¨æ—¶é’Ÿæä¾›è®¡æ—¶ï¼ŒOne  Pulse Modeä¸ç”¨å‹¾é€‰ï¼›å¼€å¯ç›¸åº”çš„ä¸²å£ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227437.png" alt="é—¨æ¨¡å¼é…ç½®"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)</span><br><span class="line">//è·å–æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">__HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">//æ¸…ç†æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)</span><br><span class="line">//ä¸­æ–­æ›´æ–°å‡½æ•°</span><br><span class="line"></span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);</span><br><span class="line">//å¼€å¯å®šæ—¶å™¨ä¸­æ–­</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">char update[]=&quot;è‡ªåŠ¨é‡è£…è½½&quot;;</span><br><span class="line">char trigger[]=&quot;ä»æ¨¡å¼è§¦å‘&quot;;</span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&#123;</span><br><span class="line">if(htim==&amp;htim2)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">HAL_UART_Transmit(&amp;huart1,(uint8_t*)update,strlen(update),100);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//è§¦å‘æ›´æ–°ä¸­æ–­ï¼Œåœ¨å®šæ—¶å™¨æ›´æ–°ä¸­æ–­ä¸­ä¼ è¾“ç›¸åº”çš„æ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">  /* USER CODE BEGIN 2 */</span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);//å¼€å¯å®šæ—¶å™¨ä¸­æ–­ï¼ˆéé˜»å¡æ¨¡å¼ï¼‰</span><br><span class="line">int counter =0;</span><br><span class="line">char message[] =&quot;&quot;;</span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1) </span><br><span class="line">  &#123;    </span><br><span class="line">       if(__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)==SET)&#123;</span><br><span class="line">       __HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">           HAL_UART_Transmit(&amp;huart1,(uint8_t*)trigger,strlen(trigger),100);</span><br><span class="line">     &#125;//é—¨æ¨¡å¼ä¸‹ä¸å†å¼€å¯å®šæ—¶å™¨æ›´æ–°ä¸­æ–­ï¼Œæ‰€ä»¥å°†åˆ¤æ–­è§¦å‘çš„é€»è¾‘å†™åœ¨ä¸»å‡½æ•°ä¸­ï¼Œä»¥ä¾¿æ¸…é›¶æ ‡å¿—ä½</span><br><span class="line">     </span><br><span class="line">counter=__HAL_TIM_GET_COUNTER(&amp;htim2);//è·å–æ•°æ®</span><br><span class="line">sprintf(message,&quot;counter:%d&quot;,counter);</span><br><span class="line">    HAL_UART_Transmit(&amp;huart1,(uint8_t*)message,strlen(message),100);</span><br><span class="line">        HAL_Delay(500);</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="è§¦å‘æ¨¡å¼">è§¦å‘æ¨¡å¼</h2><p>å®è·µ1ï¼šçº¢å¤–æ£€æµ‹è®¡æ•°ï¼Œå¤–éƒ¨è§¦å‘å¼€å§‹è®¡æ•°ï¼Œé…åˆå•è„‰å†²æ¨¡å¼ï¼Œå®ç°ä¸€ä¸ªè®¡æ•°å‘¨æœŸï¼Œè¿›è¡Œä¸²å£å‘é€æ•°æ®ã€‚</p><p>è§¦å‘æ¨¡å¼ä¸‹ï¼Œåªèƒ½å¯åŠ¨å®šæ—¶å™¨ï¼Œè€Œä¸èƒ½åœæ­¢å®šæ—¶å™¨ï¼Œå¯ä»¥é…åˆå•è„‰å†²æ¨¡å¼ï¼ˆOne  Pulse Modeï¼‰ä½¿ç”¨ï¼Œåœ¨è¾¾åˆ°è®¾å®šçš„æ•°æ®æ—¶ï¼Œåœæ­¢è®¡æ•°ã€‚</p><p>é…ç½®å¦‚ä¸‹ï¼šç”±å†…éƒ¨æ—¶é’Ÿæä¾›è®¡æ—¶ï¼›å¼€å¯ç›¸åº”çš„ä¸²å£ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227381.png" alt="è§¦å‘æ¨¡å¼é…ç½®"></p><p>æ‰€ç”¨çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)</span><br><span class="line">//è·å–æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">__HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">//æ¸…ç†æ ‡å¿—ä½ï¼Œç¬¬ä¸€ä½æ˜¯å®šæ—¶å™¨æ“ä½œå¥æŸ„çš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ“ä½œä½çš„å€¼</span><br><span class="line"></span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)</span><br><span class="line">//ä¸­æ–­æ›´æ–°å‡½æ•°</span><br><span class="line"></span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);</span><br><span class="line">//å¼€å¯å®šæ—¶å™¨ä¸­æ–­</span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">char update[]=&quot;è‡ªåŠ¨é‡è£…è½½&quot;;</span><br><span class="line">char trigger[]=&quot;ä»æ¨¡å¼è§¦å‘&quot;;</span><br><span class="line">void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)&#123;</span><br><span class="line">if(htim==&amp;htim2)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">HAL_UART_Transmit(&amp;huart1,(uint8_t*)update,strlen(update),100);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//è§¦å‘æ›´æ–°ä¸­æ–­ï¼Œåœ¨å®šæ—¶å™¨æ›´æ–°ä¸­æ–­ä¸­ä¼ è¾“ç›¸åº”çš„æ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">  /* USER CODE BEGIN 2 */</span><br><span class="line">HAL_TIM_Base_Start_IT(&amp;htim2);//å¼€å¯å®šæ—¶å™¨ä¸­æ–­ï¼ˆéé˜»å¡æ¨¡å¼ï¼‰</span><br><span class="line">int counter =0;</span><br><span class="line">char message[] =&quot;&quot;;</span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1) </span><br><span class="line">  &#123;    </span><br><span class="line">       if(__HAL_TIM_GET_FLAG(htim,TIM_FLAG_TRIGGER)==SET)&#123;</span><br><span class="line">       __HAL_TIM_CLEAR_FLAG(htim,TIM_FLAG_TRIGGER);</span><br><span class="line">           HAL_UART_Transmit(&amp;huart1,(uint8_t*)trigger,strlen(trigger),100);</span><br><span class="line">     &#125;//é—¨æ¨¡å¼ä¸‹ä¸å†å¼€å¯å®šæ—¶å™¨æ›´æ–°ä¸­æ–­ï¼Œæ‰€ä»¥å°†åˆ¤æ–­è§¦å‘çš„é€»è¾‘å†™åœ¨ä¸»å‡½æ•°ä¸­ï¼Œä»¥ä¾¿æ¸…é›¶æ ‡å¿—ä½</span><br><span class="line">     </span><br><span class="line">counter=__HAL_TIM_GET_COUNTER(&amp;htim2);//è·å–æ•°æ®</span><br><span class="line">sprintf(message,&quot;counter:%d&quot;,counter);</span><br><span class="line">    HAL_UART_Transmit(&amp;huart1,(uint8_t*)message,strlen(message),100);</span><br><span class="line">        HAL_Delay(500);</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€ä¸ªå°çŸ¥è¯†">ä¸€ä¸ªå°çŸ¥è¯†</h2><p><strong>ç¨‹åºåˆšå¯åŠ¨/å¤ä½æ—¶ï¼Œä¼šè¾“å‡ºâ€œè‡ªåŠ¨é‡è£…è½½â€ï¼Ÿ</strong><br><strong>åŸå› </strong>ï¼š  MX_TIM2_Init();å°†æ ‡å¿—ä½ç½®ä¸º1ï¼Œ</p><p>â€‹              HAL_TIM_Base_Start_IT(&amp;htim2);å¼€å¯ä¸­æ–­</p><p>â€‹              NVICæ£€æµ‹åˆ°ï¼Œå› æ­¤è¾“å‡ºâ€œè‡ªåŠ¨é‡è£…è½½â€</p><p><strong>è§£å†³åŠæ³•</strong>ï¼šå°†HAL_TIM_CLEAR_FLAG(&amp;htim2,TIM_FLAG_UPDATE);</p><p>â€‹                 æˆ–è€…HAL_TIM_CLEAR_IT(&amp;htim2,TIM_FLAG_UPDATE);</p><p>â€‹                 æ”¾åœ¨HAL_TIM_Base_Start_IT(&amp;htim2);å‰å³å¯ã€‚</p><h1>è¾“å…¥æ•è·</h1><p>åŒä¸€ä¸ªä¿¡å·é€šè¿‡ä¸¤ç§ä¸åŒé€šé“ï¼Œå®ç°å¯¹ä¸Šå‡æ²¿ä¸ä¸‹é™æ²¿çš„é—´è·æµ‹é‡ï¼Œå³ä¸€ä¸ªè®¾ä¸ºç›´æ¥è¾“å…¥ï¼Œä¸€ä¸ªè¾“å…¥ä¸ºé—´æ¥æ•è·ï¼ŒTI1å’ŒTI2ã€TI3å’ŒTI4ä¸ºä¸€å¯¹</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227326.png" alt="è¾“å…¥æ•è·"></p><h1>ä»£ç å®è·µä¸‰</h1><p>å®è·µ1ï¼šè¶…å£°æ³¢æ¨¡å—å®ç°æµ‹è·ï¼Œå¹¶æ˜¾ç¤ºåœ¨OLEDå±å¹•ä¸Š</p><p>é…ç½®å¦‚ä¸‹</p><p>ï¼ˆ1ï¼‰å¼€å¯è¾“å…¥æ•è·çš„ç›´æ¥é€šé“å’Œç®€ä»‹é€šé“</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227325.png" alt="è¾“å…¥æ•è·é…ç½®1"></p><p>ï¼ˆ2ï¼‰å¼€å¯GPIO_Outputï¼Œå®ç°å¯¹è¶…å£°æ³¢æ¨¡å—çš„æ¿€æ´»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227128.png" alt="è¾“å…¥æ•è·é…ç½®2"></p><p>ï¼ˆ3ï¼‰å¼€å¯è¾“å…¥æ•è·ä¸­æ–­</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142227993.png" alt="è¾“å…¥æ•è·é…ç½®3"></p><p>ï¼ˆ4ï¼‰å¼€å¯ç›¸åº”çš„ä¸¤ä¸ªé€šé“ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºä¸Šå‡æ²¿å’Œä¸‹é™æ²¿ï¼Œç›´æ¥ä¸é—´æ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407142228378.png" alt="è¾“å…¥æ•è·é…ç½®4"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim)</span><br><span class="line">&#123;</span><br><span class="line">//è¾“å…¥æ•è·ä¸­æ–­å›è°ƒå‡½æ•°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_3)</span><br><span class="line"></span><br><span class="line">HAL_TIM_Base_Start(&amp;htim1);//å¼€å¯å®šæ—¶å™¨</span><br><span class="line"></span><br><span class="line">HAL_TIM_IC_Start(&amp;htim1,TIM_CHANNEL_3);</span><br><span class="line">//å¼€å¯è¾“å…¥æ•è·ï¼Œç¬¬ä¸€ä¸ªä¸ºå®šæ—¶å™¨æ“ä½œçš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªä¸ºé€šé“</span><br><span class="line"></span><br><span class="line">HAL_TIM_IC_Start_IT(&amp;htim1,TIM_CHANNEL_4);</span><br><span class="line">//å¼€å¯è¾“å…¥æ•è·ï¼Œä¸­æ–­å®Œæˆåæç¤ºï¼Œæ‰€ä»¥ç”¨_IT;ç¬¬ä¸€ä¸ªä¸ºå®šæ—¶å™¨æ“ä½œçš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªä¸ºé€šé“</span><br><span class="line"></span><br><span class="line">__HAL_TIM_SET_COUNTER(&amp;htim1,0);//ç½®é›¶è®¡æ•°å™¨ï¼Œé˜²æ­¢è¾¾åˆ°è®¾ç½®çš„è®¡æ•°å‘¨æœŸçš„ä¸Šé™ï¼Œè§¦å‘è‡ªåŠ¨é‡è£…è½½</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN Includes */</span><br><span class="line">#include &quot;oled.h&quot;</span><br><span class="line">#include &quot;stdio.h&quot;</span><br><span class="line">#include &quot;string.h&quot;</span><br><span class="line">/* USER CODE END Includes */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">int up=0;</span><br><span class="line">int down =0;</span><br><span class="line">float distance=0;</span><br><span class="line">void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim)&#123;//è¾“å…¥æ•è·ä¸­æ–­å›è°ƒå‡½æ•°</span><br><span class="line"></span><br><span class="line">   if(htim==&amp;htim1 &amp;&amp; htim-&gt;Channel==HAL_TIM_ACTIVE_CHANNEL_4)</span><br><span class="line">   &#123;</span><br><span class="line">   //æ³¨æ„å˜é‡ä¸ºHAL_TIM_ACTIVE_CHANNEL_X</span><br><span class="line">   </span><br><span class="line">   up = HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_3);</span><br><span class="line">   down = HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_4);</span><br><span class="line">   distance = ((down-up)*0.034)/2;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"> /* USER CODE BEGIN 2 */</span><br><span class="line">  HAL_Delay(20);</span><br><span class="line">  OLED_Init();</span><br><span class="line"> HAL_TIM_Base_Start (&amp;htim1);//å¼€å¯å®šæ—¶å™¨</span><br><span class="line"> HAL_TIM_IC_Start (&amp;htim1,TIM_CHANNEL_3);//å¼€å§‹è¾“å…¥æ•è·</span><br><span class="line"> HAL_TIM_IC_Start_IT (&amp;htim1,TIM_CHANNEL_4);//å¼€å¯è¾“å…¥æ•è·ï¼ˆä¸­æ–­ï¼‰</span><br><span class="line"> char message[20]=&quot;&quot;;</span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">HAL_GPIO_WritePin(Trig_GPIO_Port,Trig_Pin,GPIO_PIN_SET);</span><br><span class="line">HAL_Delay(1);</span><br><span class="line">HAL_GPIO_WritePin(Trig_GPIO_Port,Trig_Pin,GPIO_PIN_RESET);</span><br><span class="line">//æ ¹æ®æ‰‹å†Œç»™è¶…å£°æ³¢æ¨¡å—ä¸€ä¸ªè¾“å…¥ç”µå‹</span><br><span class="line">__HAL_TIM_SET_COUNTER(&amp;htim1,0);//ç½®é›¶è®¡æ•°å‘¨æœŸï¼Œé˜²æ­¢è¶…å‡ºä¸Šé™</span><br><span class="line">HAL_Delay(20);</span><br><span class="line"></span><br><span class="line">OLED_NewFrame();</span><br><span class="line">sprintf(message,&quot;è·ç¦» ï¼š%.2fcm&quot;,distance);</span><br><span class="line">OLED_PrintString(10,10,message,&amp;font16x16,OLED_COLOR_NORMAL);</span><br><span class="line">OLED_ShowFrame();</span><br><span class="line">HAL_Delay(500);//åœ¨OLEDå±å¹•ä¸Šæ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><h1>ä¸€äº›ä¸»è¦å‚è€ƒèµ„æ–™</h1><p>1.<a href="https://www.bilibili.com/video/BV11u4y1A7gS/?spm_id_from=pageDriver&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32ã€‘ç¬¬16é›† åŠ¨ç”»å‘Šè¯‰ä½ , STM32çš„å®šæ—¶å™¨åˆ°åº•æ€ä¹ˆå›äº‹_å“”å“©å“”å“©_bilibili</a></p><p>2.<a href="https://www.bilibili.com/video/BV1N94y1u7Uz/?spm_id_from=pageDriver&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32ã€‘åŠ¨ç”»è®²è§£å®šæ—¶å™¨å¤–éƒ¨æ—¶é’Ÿ &amp; å®æˆ˜ä¼ é€å¸¦æµ‹é€Ÿè£…ç½®_å“”å“©å“”å“©_bilibili</a></p><p>3.<a href="https://www.bilibili.com/video/BV1mU421o7vt/?spm_id_from=pageDriver&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32ã€‘ä¸€çœ‹å°±æ‡‚çš„å®šæ—¶å™¨ä»æ¨¡å¼è®²è§£_å“”å“©å“”å“©_bilibili</a></p><p>4.<a href="https://www.bilibili.com/video/BV1HM4m1R75B/?p=21&amp;spm_id_from=pageDriver">ã€STM32ã€‘åŠ¨ç”»è®²è§£è¾“å…¥æ•è· å¹¶å®ç°è¶…å£°æ³¢æµ‹è·_å“”å“©å“”å“©_bilibili</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆå…­ï¼‰æ—¶é’Ÿæºä¸æ—¶é’Ÿæ ‘</title>
      <link href="/2024/07/10/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89%E6%97%B6%E9%92%9F%E6%BA%90%E4%B8%8E%E6%97%B6%E9%92%9F%E6%A0%91/"/>
      <url>/2024/07/10/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89%E6%97%B6%E9%92%9F%E6%BA%90%E4%B8%8E%E6%97%B6%E9%92%9F%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1>ç›¸å…³åè¯çš„ç®€è¦ä»‹ç»</h1><p>æ—¶é’Ÿæºä¸æ—¶é’Ÿæ ‘çš„ä¸»ä½“éƒ¨åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>å†…éƒ¨æ—¶é’Ÿï¼šç”±å•ç‰‡æœºå†…éƒ¨å†³å®šï¼›</p><p>å¤–éƒ¨æ—¶é’Ÿï¼šç”±æ™¶æŒ¯å†³å®šï¼›</p><p>PLLé”ç›¸ç¯ï¼šæä¾›ä¸€ä¸ªå€é¢‘å™¨çš„ä½œç”¨ï¼ˆä½œç”¨ä¹‹ä¸€ï¼‰ï¼›</p><p>SYSCLKï¼šç³»ç»Ÿæ—¶é’Ÿï¼›</p><p>HCLKï¼šAHBï¼ˆå…ˆè¿›é«˜æ€§èƒ½æ€»çº¿ï¼‰çš„æ—¶é’Ÿçº¿ï¼›</p><p>å†…å­˜ã€å†…æ ¸ã€DMAï¼šé¢‘ç‡å’ŒHCLKä¿æŒä¸€è‡´ï¼›</p><p>APB1ï¼šUSART2-5ã€SPI2-3ã€IICã€USBã€CANã€é€šç”¨å®šæ—¶å™¨ã€åŸºæœ¬å®šæ—¶å™¨</p><p>APB2ï¼šUSART1ã€SPI1ã€GPIOã€ADCã€é«˜çº§å®šæ—¶å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407102057211.png" alt="éƒ¨åˆ†å›¾"></p><p>FCLKï¼šä¸ºä¸­æ–­é‡‡æ ·æä¾›ä¿¡å·ï¼Œä½åŠŸè€—æ¨¡å¼å”¤é†’ï¼Œåœ¨HCLKåœæ­¢çš„æƒ…å†µä¸‹è¿è¡Œï¼›</p><p>TO FLITFDCLKï¼šflashç¼–ç¨‹æ¥å£çš„æ—¶é’Ÿï¼Œä¿¡å·æ¥æºHSIï¼›</p><p>TO USBï¼šUSBæä¾›åŠŸèƒ½ï¼Œæ¥è‡ªPPLé”ç›¸ç¯ï¼›</p><p>CSSï¼šæ—¶é’Ÿå®‰å…¨ç³»ç»Ÿï¼Œåœ¨HSEä¸PLCLKçš„æƒ…å†µä¸‹äº§ç”Ÿç´§æ€¥åˆ¶åŠ¨ï¼Œåˆ‡æ¢ä¸ºHSIï¼Œä¿éšœæ—¶é’Ÿçš„ç¨³å®šï¼›</p><p>RTCå’ŒIWDGï¼šå®æ—¶æ—¶é’Ÿä¸çœ‹é—¨ç‹—ï¼Œç”±LSIã€LSEã€å’ŒHSEçš„128åˆ†é¢‘è¾“å…¥ï¼›</p><p>MCOï¼š cubemxä¸­å‹¾é€‰ç›¸åº”çš„æ—¶é’Ÿè¾“å‡ºåŠŸèƒ½ï¼Œå¯ä»¥å°†æ—¶é’Ÿè¾“å‡ºï¼ˆä¸å¸¸ç”¨ï¼‰ã€‚</p><p>æ€»å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407102057367.png" alt="æ—¶é’Ÿæºä¸æ—¶é’Ÿçº¿æ€»å›¾"></p><h1>ä¸€äº›ä¸»è¦å‚è€ƒèµ„æ–™</h1><p>1.<a href="https://www.bilibili.com/video/BV1ph4y1e7Ey/?p=17&amp;spm_id_from=pageDriver">ã€STM32ã€‘è¶…æ¸…æ™°STM32æ—¶é’Ÿæ ‘åŠ¨ç”»è®²è§£_å“”å“©å“”å“©_bilibili</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆäº”ï¼‰IIC</title>
      <link href="/2024/07/06/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89IIC/"/>
      <url>/2024/07/06/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89IIC/</url>
      
        <content type="html"><![CDATA[<h1>ä¸€äº›å‰ç½®çŸ¥è¯†</h1><h2 id="IICçš„åŸºæœ¬åŸç†">IICçš„åŸºæœ¬åŸç†</h2><p>IICä¸²è¡Œæ€»çº¿æœ‰ä¸¤æ ¹ä¿¡å·çº¿ï¼Œä¸€æ ¹æ˜¯åŒå‘çš„<strong>æ•°æ®çº¿SDA</strong>ï¼Œå¦ä¸€æ ¹æ˜¯<strong>æ—¶é’Ÿçº¿SCLã€‚<strong>ä¸¤æ¡çº¿éƒ½æ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä»¥ç¡®ä¿</strong>æ€»çº¿ç©ºé—²æ—¶åˆ»ä¸ºé«˜ç”µå¹³</strong>ï¼Œå…¶ä¸­æ—¶é’Ÿä¿¡å·æ˜¯ç”±ä¸»æ§å™¨ä»¶äº§ç”Ÿã€‚IICæ€»çº¿æ”¯æŒå¤šè®¾å¤‡è¿æ¥ï¼Œå…è®¸å¤šä¸»æœºå­˜åœ¨ï¼Œå¯¹äºå¹¶è”åœ¨ä¸€æ¡æ€»çº¿ä¸Šçš„æ¯ä¸ªIICè®¾å¤‡éƒ½æœ‰å”¯ä¸€çš„åœ°å€**ï¼ˆå³é åœ°å€æ¥åŒºåˆ†æ¯ä¸€ä¸ªIICè®¾å¤‡ï¼‰ã€‚**</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407101424310.png" alt="IIC"></p><h4 id="èµ·å§‹ä¿¡å·"><strong>èµ·å§‹ä¿¡å·</strong></h4><p>å½“æ—¶é’Ÿçº¿ï¼ˆSCLï¼‰ä¸ºé«˜å¹³æ—¶ï¼Œæ•°æ®çº¿ï¼ˆSDAï¼‰ä»é«˜ç”µå¹³è·³å˜åˆ°ä½ç”µå¹³ã€‚</p><h4 id="ç»ˆæ­¢ä¿¡å·"><strong>ç»ˆæ­¢ä¿¡å·</strong></h4><p>å½“æ—¶é’Ÿçº¿ï¼ˆSCLï¼‰ä¸ºé«˜å¹³æ—¶ï¼Œæ•°æ®çº¿ï¼ˆSDAï¼‰ä»ä½ç”µå¹³è·³å˜åˆ°é«˜ç”µå¹³ã€‚</p><h4 id="åº”ç­”ä¿¡å·"><strong>åº”ç­”ä¿¡å·</strong></h4><p>ä¸»æœºæ¯å‘é€ä¸€ä¸ªå­—èŠ‚ï¼ˆ8ä¸ªbitï¼‰ï¼Œå°±åœ¨<strong>ç¬¬9ä¸ªæ—¶é’Ÿè„‰å†²æœŸé—´é‡Šæ”¾æ•°æ®çº¿ï¼ˆSDAï¼‰</strong>ï¼Œç”±ä»æœºåé¦ˆä¸€ä¸ªåº”ç­”ä¿¡å·ã€‚</p><ul><li><p>åº”ç­”ä¿¡å·**ï¼ˆSDAï¼‰ä¸ºä½ç”µå¹³**æ—¶ï¼Œè§„å®šä¸ºæœ‰æ•ˆåº”ç­”ä½ï¼ˆACKï¼Œç®€ç§°åº”ç­”ä½ï¼‰ï¼Œè¡¨ç¤ºä»æœºæˆåŠŸåœ°æ¥æ”¶äº†è¯¥å­—èŠ‚ã€‚</p></li><li><p>åº”ç­”ä¿¡å·**ï¼ˆSDAï¼‰ä¸ºé«˜ç”µå¹³**æ—¶ï¼Œè§„å®šä¸ºéåº”ç­”ä½ï¼ˆNACKï¼‰ï¼Œä¸€èˆ¬è¡¨ç¤ºä»æœºæ¥æ”¶è¯¥å­—èŠ‚æ²¡æœ‰æˆåŠŸã€‚</p></li></ul><h1>IICçš„ä¸‰ç§æ¨¡å¼</h1><p>ç±»ä¼¼ä¸²å£ï¼ŒiicåŒæ—¶ä¹Ÿæœ‰ç›¸åº”çš„ä¸‰ç§é€šä¿¡æ¨¡å¼ã€‚</p><h2 id="è½®è¯¢æ¨¡å¼">è½®è¯¢æ¨¡å¼</h2><p>ä»ä¸Šè‡³ä¸‹ä¸€æ¬¡ä¸ºé€Ÿåº¦æ¨¡å¼ï¼ˆæ ‡å‡†100000ï¼Œå¿«é€Ÿ400000ï¼‰ï¼Œå…¶ä½™ä¸€èˆ¬ä¸åŠ¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407101706713.png" alt="è½®è¯¢æ¨¡å¼"></p><p>ä¸»è¦ç”¨åˆ°çš„HALåº“ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HAL_I2C_Master_Receive(&amp;hic1,AHT20_ADDRESS,&amp;readBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ¥æ”¶çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯æ¥æ”¶æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br><span class="line"></span><br><span class="line">HAL_I2C_Master_Transmit(&amp;hic1,AHT20_ADDRESS,&amp;sendBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯å°†å‘é€æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºå‘é€çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯å‘é€æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br></pre></td></tr></table></figure><p>å®è·µä¸€ï¼šAHT20çš„è¯»å–ä¸²å£å‘é€</p><p>é¦–å…ˆï¼Œç§»æ¤ç›¸åº”çš„AHT20é©±åŠ¨ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  ...</span><br><span class="line">  AHT20_Init();//åˆå§‹åŒ–AHT20</span><br><span class="line">  float temperature = 0.0, humidity = 0.0;</span><br><span class="line">  char message[50];//å®šä¹‰ç›¸å…³çš„å˜é‡ã€æ•°ç»„åç§°</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">while (1) &#123;</span><br><span class="line">    AHT20_Measure();//è¯»å–AHT20</span><br><span class="line">    temperature = AHT20_Tempurature();</span><br><span class="line">    humidity = AHT20_Humidity();</span><br><span class="line">    sprintf(message, &quot;Temperature: %.2f, Humidity: %.2f%%\r\n&quot;, temperature, humidity);</span><br><span class="line">    //æ‹¼æ¥å­—ç¬¦ä¸²</span><br><span class="line">    HAL_UART_Transmit(&amp;huart2, (uint8_t *)message, strlen(message), HAL_MAX_DELAY);</span><br><span class="line">    HAL_Delay(1000);</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸­æ–­æ¨¡å¼">ä¸­æ–­æ¨¡å¼</h2><h3 id="çŠ¶æ€æœºçš„æ¦‚å¿µ">çŠ¶æ€æœºçš„æ¦‚å¿µ</h3><p>åœ¨å®é™…å¯¹ä¸€ä¸ªæ¨¡å—çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å®Œæˆçš„å·¥ä½œæ¨¡å—åŒ–ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬å¯¹äºå®ƒè¿è¡Œçš„çŠ¶æ€è¿›è¡Œåˆ¤å®šã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407101706193.png" alt="çŠ¶æ€æœº"></p><h2 id="ä¸­æ–­æ¨¡å¼ä»£ç ">ä¸­æ–­æ¨¡å¼ä»£ç </h2><p>å¼€å¯ä¸­æ–­æ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407101539462.png" alt="ä¸­æ–­æ¨¡å¼"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">__weak void HAL_I2C_MasterRxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">//æ¥æ”¶å®Œæˆä¸­æ–­</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">__weak void HAL_I2C_MasterTxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">//å‘é€å®Œæˆä¸­æ–­</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HAL_I2C_Master_Receive_IT(&amp;hic1,AHT20_ADDRESS,&amp;readBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ¥æ”¶çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯æ¥æ”¶æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br><span class="line"></span><br><span class="line">HAL_I2C_Master_Transmit_IT(&amp;hic1,AHT20_ADDRESS,&amp;sendBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯å°†å‘é€æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºå‘é€çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯å‘é€æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br></pre></td></tr></table></figure><p>å®è·µä¸€ï¼šAHT20çš„è¯»å–ä¸²å£å‘é€</p><p>i2c.c</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line"></span><br><span class="line">void HAL_I2C_MasterTxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">   if(hi2c == &amp;hi2c1)&#123;</span><br><span class="line">   aht20_State == 2;</span><br><span class="line">&#125;//å‘é€ä¿¡æ¯å®Œæˆä¸­æ–­</span><br><span class="line"></span><br><span class="line">void HAL_I2C_MasterRxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">   if(hi2c == &amp;hi2c1)&#123;</span><br><span class="line">   aht20_State == 4;</span><br><span class="line">&#125;//æ¥æ”¶ä¿¡æ¯å®Œæˆä¸­æ–­</span><br><span class="line"></span><br><span class="line">/* USER CODE END 0 */</span><br></pre></td></tr></table></figure><p>main.h</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN EC */</span><br><span class="line"></span><br><span class="line">extern uint8_t aht20_State;//æå‰å˜é‡ï¼Œä»¥ä¾¿å…¨å±€ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">/* USER CODE END EC */</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>main.c</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">AHT20_Init();</span><br><span class="line">float temperature = 0.0, humidity = 0.0;</span><br><span class="line">char message[50];</span><br><span class="line"></span><br><span class="line">/* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">while (1) &#123;</span><br><span class="line"></span><br><span class="line">if(aht20_State == 0)&#123;</span><br><span class="line">     AHT20_Measure();</span><br><span class="line">     aht20_State == 1;</span><br><span class="line">  &#125;else if(aht20_State == 2)&#123;</span><br><span class="line">     HAL_Delay(75);</span><br><span class="line">     AHT20_Get();</span><br><span class="line">     aht20_State == 3;</span><br><span class="line">  &#125;else if(aht20_State == 4)&#123;</span><br><span class="line">    AHT20_Analysis(&amp;temperature,&amp;humidity);</span><br><span class="line">    sprintf(message, &quot;Temperature: %.2f, Humidity: %.2f%%\r\n&quot;, temperature, humidity);</span><br><span class="line">    HAL_UART_Transmit(&amp;huart2, (uint8_t *)message, strlen(message), HAL_Delay(1000);</span><br><span class="line">    aht20_State == 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">  /* USER CODE BEGIN 3 */</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="DMAæ¨¡å¼">DMAæ¨¡å¼</h2><p>å¼€å¯DMAæ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407101539521.png" alt="DMAæ¨¡å¼"></p><p>æ‰€ç”¨åˆ°çš„HALåº“å‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">__weak void HAL_I2C_MasterRxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">//æ¥æ”¶å®Œæˆä¸­æ–­</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">__weak void HAL_I2C_MasterTxCpltCallback(I2C_HandleTypeDef *hi2c)&#123;</span><br><span class="line">//å‘é€å®Œæˆä¸­æ–­</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HAL_I2C_Master_Receive_DMA(&amp;hic1,AHT20_ADDRESS,&amp;readBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯è·å–æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºæ¥æ”¶çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯æ¥æ”¶æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br><span class="line"></span><br><span class="line">HAL_I2C_Master_Transmit_DMA(&amp;hic1,AHT20_ADDRESS,&amp;sendBUffer,3,HAL_MAX_DELAY);  </span><br><span class="line">//æ¥æ”¶å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯iicçš„åœ°å€æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªæ˜¯å°†å‘é€æ•°æ®çš„åœ°å€ï¼Œç¬¬ä¸‰ä¸ªä¸ºå‘é€çš„æ•°ç»„åœ°å€ï¼Œç¬¬å››ä¸ªæ˜¯å‘é€æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äº”ä¸ªæ˜¯æœ€é•¿ç­‰å¾…æ—¶é—´</span><br></pre></td></tr></table></figure><p>ä»£ç å®è·µ</p><p>å®è·µä¸€ï¼šç»“åˆOLEDå’ŒAHT20åˆ¶ä½œç®€æ˜“æ¸©æ¹¿åº¦è®¡</p><p>main.c</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> /* USER CODE BEGIN Includes */</span><br><span class="line">   #include &quot;oled.h&quot;</span><br><span class="line">   #include &quot;aht20.h&quot;</span><br><span class="line">   #include &quot;stdio.h&quot;</span><br><span class="line">   #include &quot;string.h&quot;</span><br><span class="line"> /* USER CODE END Includes */</span><br><span class="line"> </span><br><span class="line"> /* USER CODE BEGIN 2 */</span><br><span class="line">     HAL_Delay(20);</span><br><span class="line">     OLED_Init();</span><br><span class="line"> AHT20_Init();</span><br><span class="line">     float temperature = 0.0, humidity = 0.0;</span><br><span class="line"> char message[50];//åˆå§‹åŒ–ç›¸åº”çš„çš„å˜é‡å’Œå‡½æ•°</span><br><span class="line"> /* USER CODE END 2 */</span><br><span class="line"> </span><br><span class="line">while (1)</span><br><span class="line">  &#123;</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line"> </span><br><span class="line">   AHT20_Measure();</span><br><span class="line">temperature=AHT20_Temperature();</span><br><span class="line">humidity=AHT20_Humidity();  </span><br><span class="line"></span><br><span class="line">    OLED_NewFrame();//å‡†å¤‡æ–°çš„å›¾åƒ</span><br><span class="line"></span><br><span class="line">OLED_DrawImage(15,0,&amp;temperatureImgImg,OLED_COLOR_NORMAL);</span><br><span class="line">//ç”»å›¾ï¼Œxï¼Œy,å›¾åƒæŒ‡é’ˆï¼Œå­—ç¬¦é¢œè‰²</span><br><span class="line">sprintf(message,&quot;%.1fâ„ƒ&quot;,temperature);//æ‹¼æ¥å­—ç¬¦ä¸²</span><br><span class="line">OLED_PrintString(45,15,message,&amp;font16x16,OLED_COLOR_NORMAL);</span><br><span class="line">//æ‰“å°å­—ç¬¦ä¸²ï¼Œxï¼Œy,å­—ç¬¦ä¸²æŒ‡é’ˆåœ°å€ï¼Œå­—ç¬¦é¢œè‰²</span><br><span class="line"></span><br><span class="line">OLED_DrawImage(15,30,&amp;humidityImgImg,OLED_COLOR_NORMAL);</span><br><span class="line">sprintf(message,&quot;%.1f%%&quot;,humidity);</span><br><span class="line">OLED_PrintString(45,40,message,&amp;font16x16,OLED_COLOR_NORMAL);</span><br><span class="line"></span><br><span class="line">OLED_ShowFrame();//å±•ç¤ºå›¾åƒ</span><br></pre></td></tr></table></figure><p>å­—ä½“ã€å›¾ç‰‡éœ€è¦ç”¨å–æ¨¡åŠ©æ‰‹å–æ¨¡ï¼Œæ”¾åœ¨font.cæ–‡ä»¶ä¸­ï¼Œå›¾ç‰‡åç§°éœ€è¦extern æå‰å˜é‡åœ¨font.hä¸­ï¼Œä»¥ä¾¿å…¨å±€è°ƒç”¨ã€‚</p><h1>ä¸€äº›å‚è€ƒèµ„æ–™</h1><p>1.<a href="https://www.bilibili.com/video/BV1QN411D7ak/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32å…¥é—¨æ•™ç¨‹-2024ã€‘ç¬¬12é›† IICé€šä¿¡ä¸æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨AHT20(DHT20)_å“”å“©å“”å“©_bilibili</a></p><p>2.<a href="https://www.bilibili.com/video/BV1AN41127VL/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32å…¥é—¨æ•™ç¨‹-2024ã€‘ç¬¬13é›† IICçš„ä¸­æ–­ä¸DMAä»¥åŠçŠ¶æ€æœºç¼–ç¨‹_å“”å“©å“”å“©_bilibili</a></p><p>3.<a href="https://www.bilibili.com/video/BV19u4y197df/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32å…¥é—¨æ•™ç¨‹-2024ã€‘ç¬¬14é›† å¦‚ä½•åœ¨OLEDå±å¹•ä¸ŠæŒ¥æ¯«_å“”å“©å“”å“©_bilibili</a></p><p>4.<a href="https://www.bilibili.com/video/BV18u4y1e7PR/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32Â·ç•ªå¤–ã€‘æŒ‘æˆ˜5åˆ†é’Ÿåˆ¶ä½œæ¸©æ¹¿åº¦è®¡(A/DHT20+OLED)_å“”å“©å“”å“©_bilibili</a></p><p>5.<a href="https://blog.csdn.net/weixin_54076783/article/details/129597296?ops_request_misc=%7B%22request%5Fid%22%3A%22172049332416800197086902%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=172049332416800197086902&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-129597296-null-null.142%5Ev100%5Epc_search_result_base4&amp;utm_term=iicstm32&amp;spm=1018.2226.3001.4187">STM32ä¹‹IIC_stm32 iic-CSDNåšå®¢</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆå››ï¼‰ä¸²å£é€šä¿¡</title>
      <link href="/2024/07/02/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/"/>
      <url>/2024/07/02/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<h1>ä¸€äº›å‰ç½®çŸ¥è¯†</h1><h2 id="å¹¶ã€ä¸²è¡Œé€šä¿¡çš„åŒºåˆ«">å¹¶ã€ä¸²è¡Œé€šä¿¡çš„åŒºåˆ«</h2><table><thead><tr><th style="text-align:left"></th><th>å¹¶è¡Œé€šä¿¡</th><th>ä¸²è¡Œé€šä¿¡</th></tr></thead><tbody><tr><td style="text-align:left">ä¼ è¾“åŸç†</td><td>æ•°æ®å„ä¸ªä½åŒæ—¶ä¼ è¾“</td><td>æ•°æ®æŒ‰ä½é¡ºåºä¼ è¾“</td></tr><tr><td style="text-align:left">ä¼˜ç‚¹</td><td>é€Ÿåº¦å¿«</td><td>å ç”¨å¼•è„šèµ„æºå°‘</td></tr><tr><td style="text-align:left">ç¼ºç‚¹</td><td>å ç”¨å¼•è„šèµ„æºå¤š</td><td>é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢</td></tr></tbody></table><h2 id="ä¸²è¡Œé€šä¿¡çš„åˆ†ç±»">ä¸²è¡Œé€šä¿¡çš„åˆ†ç±»</h2><p>ï¼ˆ*ï¼‰1ã€æŒ‰ç…§æ•°æ®ä¼ é€æ–¹å‘ï¼Œåˆ†ä¸ºï¼š</p><p>å•å·¥ï¼šæ•°æ®ä¼ è¾“åªæ”¯æŒæ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼›<br>åŠåŒå·¥ï¼šå…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ã€‚ä½†æ˜¯ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åˆ‡æ¢æ–¹å‘çš„å•å·¥é€šä¿¡ï¼›å®ƒä¸éœ€è¦ç‹¬ç«‹çš„æ¥æ”¶ç«¯å’Œå‘é€ç«¯ï¼Œä¸¤è€…å¯ä»¥åˆå¹¶ä¸€èµ·ä½¿ç”¨ä¸€ä¸ªç«¯å£ã€‚<br>å…¨åŒå·¥ï¼šå…è®¸æ•°æ®åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ã€‚å› æ­¤ï¼Œå…¨åŒå·¥é€šä¿¡æ˜¯ä¸¤ä¸ªå•å·¥é€šä¿¡æ–¹å¼çš„ç»“åˆï¼Œéœ€è¦ç‹¬ç«‹çš„æ¥æ”¶ç«¯å’Œå‘é€ç«¯ã€‚</p><p>ï¼ˆ***ï¼‰ 2ã€æŒ‰ç…§é€šä¿¡æ–¹å¼ï¼Œåˆ†ä¸ºï¼š</p><p><strong>åŒæ­¥é€šä¿¡</strong>ï¼šå¸¦æ—¶é’ŸåŒæ­¥ä¿¡å·ä¼ è¾“ã€‚æ¯”å¦‚ï¼šSPIï¼ŒIICé€šä¿¡æ¥å£ã€‚<br><strong>å¼‚æ­¥é€šä¿¡</strong>ï¼šä¸å¸¦æ—¶é’ŸåŒæ­¥ä¿¡å·ã€‚æ¯”å¦‚ï¼šUART(é€šç”¨å¼‚æ­¥æ”¶å‘å™¨)ï¼Œå•æ€»çº¿ã€‚<br>åœ¨åŒæ­¥é€šè®¯ä¸­ï¼Œæ”¶å‘è®¾å¤‡ä¸Šæ–¹ä¼šä½¿ç”¨ä¸€æ ¹ä¿¡å·çº¿ä¼ è¾“ä¿¡å·ï¼Œåœ¨æ—¶é’Ÿä¿¡å·çš„é©±åŠ¨ä¸‹åŒæ–¹è¿›è¡Œåè°ƒï¼ŒåŒæ­¥æ•°æ®ã€‚ä¾‹å¦‚ï¼Œé€šè®¯ä¸­é€šå¸¸åŒæ–¹ä¼šç»Ÿä¸€è§„å®šåœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿æˆ–è€…ä¸‹é™æ²¿å¯¹æ•°æ®çº¿è¿›è¡Œé‡‡æ ·ã€‚</p><p>åœ¨å¼‚æ­¥é€šè®¯ä¸­ä¸ä½¿ç”¨æ—¶é’Ÿä¿¡å·è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå®ƒä»¬ç›´æ¥åœ¨æ•°æ®ä¿¡å·ä¸­ç©¿æ’ä¸€äº›ç”¨äºåŒæ­¥çš„ä¿¡å·ä½ï¼Œæˆ–è€…å°†ä¸»é¢˜æ•°æ®è¿›è¡Œæ‰“åŒ…ï¼Œä»¥æ•°æ®å¸§çš„æ ¼å¼ä¼ è¾“æ•°æ®ã€‚é€šè®¯ä¸­è¿˜éœ€è¦åŒæ–¹è§„çº¦å¥½æ•°æ®çš„ä¼ è¾“é€Ÿç‡ï¼ˆä¹Ÿå°±æ˜¯æ³¢ç‰¹ç‡ï¼‰ç­‰ï¼Œä»¥ä¾¿æ›´å¥½åœ°åŒæ­¥ã€‚å¸¸ç”¨çš„æ³¢ç‰¹ç‡æœ‰4800bpsã€9600bpsã€115200bpsç­‰ã€‚</p><p>åœ¨åŒæ­¥é€šè®¯ä¸­ï¼Œæ•°æ®ä¿¡å·æ‰€ä¼ è¾“çš„å†…å®¹ç»å¤§éƒ¨åˆ†æ˜¯æœ‰æ•ˆæ•°æ®ï¼Œè€Œå¼‚æ­¥é€šè®¯ä¸­ä¼šåˆ™ä¼šåŒ…å«æ•°æ®å¸§çš„å„ç§æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥åŒæ­¥é€šè®¯æ•ˆç‡é«˜ï¼Œä½†æ˜¯åŒæ­¥é€šè®¯åŒæ–¹çš„æ—¶é’Ÿå…è®¸è¯¯å·®å°ï¼Œç¨ç¨æ—¶é’Ÿå‡ºé”™å°±å¯èƒ½å¯¼è‡´æ•°æ®é”™ä¹±ï¼Œå¼‚æ­¥é€šè®¯åŒæ–¹çš„æ—¶é’Ÿå…è®¸è¯¯å·®è¾ƒå¤§ã€‚</p><h1>ä¸‰ç§ä¸²å£é€šä¿¡æ–¹å¼</h1><h2 id="è½®è¯¢æ–¹å¼">è½®è¯¢æ–¹å¼</h2><p>ç‰¹ç‚¹ï¼šå‘ä¸€ä¸ªï¼Œæ¥å—ä¸€ä¸ªã€‚</p><p>ç¼ºç‚¹ï¼šå ç”¨cpuï¼Œåˆ©ç”¨ç‡è¾ƒä½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407032045432.png" alt="è½®è¯¢æ¨¡å¼"></p><p>æ³¢ç‰¹ç‡ï¼šå¸¸è§çš„ç”¨115200ï¼Œ9600Bits/sã€‚éœ€è¦ä¿è¯<strong>æ¥æ”¶ç«¯å’Œå‘é€ç«¯æ³¢ç‰¹ç‡ä¸€è‡´</strong>ã€‚</p><p>å­—èŠ‚é•¿åº¦ï¼š8å­—èŠ‚ï¼Œå¤–åŠ å‰é¢1ä½èµ·å§‹ä½ï¼Œåé¢1ä½ç»“æŸä½ï¼Œä¸€å…±10ä½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407032045638.png" alt="å„ç§å‚æ•°"></p><h2 id="è½®è¯¢æ¨¡å¼ä»£ç ">è½®è¯¢æ¨¡å¼ä»£ç </h2><p>ä¸»è¦ç”¨åˆ°çš„halåº“å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HAL_UART_Receive(&amp;huart1,receveData,2,HAL_MAX_DELAY);</span><br><span class="line">//æ¥æ”¶ï¼Œç¬¬ä¸€ä½ä¸ºä¸²å£åœ°å€ï¼Œç¬¬äºŒä½ä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä½ä¸ºæ•°ç»„é•¿åº¦ï¼Œç¬¬å››ä½ä¸ºç­‰å¾…æœ€å¤§æ—¶é•¿ï¼ˆHAL_MAX_DELAYä¸ºæ— é™åˆ¶æ—¶é•¿ï¼‰</span><br><span class="line"></span><br><span class="line">HAL_UART_Transmit(&amp;huart1,receveData,2,100);</span><br><span class="line">//å‘é€ï¼Œç¬¬ä¸€ä½ä¸ºä¸²å£åœ°å€ï¼Œç¬¬äºŒä½ä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä½ä¸ºæ•°ç»„é•¿åº¦ï¼Œç¬¬å››ä½ä¸ºç­‰å¾…æœ€å¤§æ—¶é•¿ï¼ˆHAL_MAX_DELAYä¸ºæ— é™åˆ¶æ—¶é•¿ï¼‰</span><br></pre></td></tr></table></figure><h3 id="ä»£ç å®è·µ">ä»£ç å®è·µ</h3><p>é€šè¿‡è½®è¯¢æ¨¡å¼å®ç°ä¸²å£æ”¶å‘æ•°æ®ï¼š</p><p>å®è·µä¸€ï¼šå®ç°æ”¶å‘â€œHello Worldâ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">char message[]=&quot;Hello World&quot;</span><br><span class="line"></span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line">        </span><br><span class="line">        HAL_UART_Transmit(&amp;huart1,(uint8_t*)message,strlen(message),100);</span><br><span class="line">        //charå¼ºè½¬ä¸ºuint8_tç±»å‹</span><br><span class="line">        HAL_Delay(1000);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å®è·µäºŒï¼šå®ç°å‘é€å¯¹åº”ä¿¡æ¯ï¼Œç‚¹äº®å¯¹åº”å°ç¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">uint8_t  receveData[2];</span><br><span class="line"></span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br><span class="line">  /* Infinite loop */</span><br><span class="line">  /* USER CODE BEGIN WHILE */</span><br><span class="line">  while (1)</span><br><span class="line">  &#123;</span><br><span class="line">    /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">HAL_UART_Receive(&amp;huart1,receveData,2,HAL_MAX_DELAY);</span><br><span class="line">HAL_UART_Transmit(&amp;huart1,receveData,2,100);</span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;R&#x27;)&#123;</span><br><span class="line">HAL_GPIO_TogglePin(LED_RED_GPIO_Port,LED_RED_Pin);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;Y&#x27;)&#123;</span><br><span class="line">HAL_GPIO_WritePin(LED_YELLOW_GPIO_Port,LED_YELLOW_Pin,GPIO_PIN_SET);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;G&#x27;)&#123;</span><br><span class="line">HAL_GPIO_WritePin(LED_GREEN_GPIO_Port,LED_GREEN_Pin,GPIO_PIN_SET);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">      //å®ç°å¯¹ä¼ è¾“ä¿¡æ¯çš„æ¥æ”¶ï¼Œå¹¶ç‚¹äº®å¯¹åº”çš„å¼•è„š</span><br><span class="line">    /* USER CODE BEGIN 3 */</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><h2 id="ä¸­æ–­æ¨¡å¼">ä¸­æ–­æ¨¡å¼</h2><p>å’Œè½®è¯¢ç±»ä¼¼ï¼Œåªæ˜¯CPUåœ¨å¯„å­˜å™¨ç©ºé—²æ—¶å¯ä»¥å¤„ç†å…¶ä»–äº‹æƒ…ã€‚å¤§è‡´åŸç†å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407032045666.png" alt="ä¸­æ–­æ¨¡å¼"></p><p>transmitå‘é€å’Œè½®è¯¢ä¸€æ ·ï¼Œè€Œreceiveæ¥æ”¶ï¼Œç”±äºä¸ä¼šç­‰å¾…ï¼Œæ‰€ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­ä¹¦å†™ç›¸å…³çš„ä»£ç é€»è¾‘ã€‚</p><p>ä½ éœ€è¦åœ¨cubemxä¸­å¼€å¯å…¨å±€ä¸­æ–­ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407032045273.png" alt="å¼€å¯å…¨å±€ä¸­æ–­"></p><h2 id="ä¸­æ–­æ¨¡å¼ä»£ç ">ä¸­æ–­æ¨¡å¼ä»£ç </h2><p>ä¸»è¦ç”¨åˆ°çš„halåº“å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">__weak void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)</span><br><span class="line">&#123; </span><br><span class="line">     //å¼±å‡½æ•°ï¼Œä¸­æ–­å›è°ƒå‡½æ•°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  HAL_UART_Transmit_IT(&amp;huart1,receveData,2);//ç¬¬ä¸€ä¸ªä¸ºä¸²å£ï¼Œç¬¬äºŒä¸ªä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä¸ªä¸ºæ•°ç»„é•¿åº¦</span><br><span class="line"> </span><br><span class="line">  HAL_UART_Receive_IT(&amp;huart1,receveData,2);//ç¬¬ä¸€ä¸ªä¸ºä¸²å£ï¼Œç¬¬äºŒä¸ªä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä¸ªä¸ºæ•°ç»„é•¿åº¦</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="ä»£ç å®è·µ-2">ä»£ç å®è·µ</h3><p>å®è·µä¸€ï¼šä¸ä¸­æ–­çš„å®è·µäºŒåŠŸèƒ½ç›¸åŒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN PV */</span><br><span class="line">uint8_t  receveData[2];</span><br><span class="line">/* USER CODE END PV */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line">void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)//åœ¨ä¸­æ–­å¤„ç†å‡½æ•°ä¸­ä¹¦å†™ä»£ç é€»è¾‘</span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line">      HAL_UART_Transmit_IT(&amp;huart1,receveData,2);</span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;R&#x27;)&#123;</span><br><span class="line">HAL_GPIO_TogglePin(LED_RED_GPIO_Port,LED_RED_Pin);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;Y&#x27;)&#123;</span><br><span class="line">HAL_GPIO_WritePin(LED_YELLOW_GPIO_Port,LED_YELLOW_Pin,GPIO_PIN_SET);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(receveData[1]==&#x27;1&#x27;&amp;&amp;receveData[0]==&#x27;G&#x27;)&#123;</span><br><span class="line">HAL_GPIO_WritePin(LED_GREEN_GPIO_Port,LED_GREEN_Pin,GPIO_PIN_SET);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HAL_UART_Receive_IT(&amp;huart1,receveData,2);//æ¯æ¬¡ç»“æŸåï¼Œå¼€å¯ä¸‹ä¸€æ¬¡çš„æ¥æ”¶</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN 2 */</span><br><span class="line"></span><br><span class="line">HAL_UART_Receive_IT(&amp;huart1,receveData,2);//åœ¨mainå‡½æ•°ä¸­å¼€å¯æ¥å—çš„ä¸­æ–­</span><br><span class="line"></span><br><span class="line"> /* USER CODE END 2 */</span><br></pre></td></tr></table></figure><h2 id="DMAæ¨¡å¼">DMAæ¨¡å¼</h2><p>æ¬è¿æ•°æ®ï¼Œåˆ›å»ºé€šé“ï¼Œç­‰å¾…å®Œæˆåé€šè¿‡ä¸­æ–­å¤„ç†å‡½æ•°é€šçŸ¥cpuã€‚</p><p>ä¼˜ç‚¹ï¼šè¿›ä¸€æ­¥è§£æ”¾cpuã€‚</p><p>å¼€å¯DMAï¼šï¼ˆä»å·¦è‡³å³ï¼Œä»ä¸Šè‡³ä¸‹ï¼Œé¡ºæ—¶é’ˆï¼‰å¼€å¯çš„DMAé€šé“ï¼Œæ•°æ®ä¼ è¾“æ–¹å‘ï¼Œä¼˜å…ˆçº§ï¼ˆä¸€èˆ¬é»˜è®¤ï¼‰ï¼Œæ¥æ”¶ç«¯å’Œå‘é€ç«¯æ˜¯å¦åœ°å€è‡ªå¢ï¼Œæ¨¡å¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407032046322.png" alt="DMA"></p><h2 id="DMAæ¨¡å¼ä»£ç ">DMAæ¨¡å¼ä»£ç </h2><p>ä¸»è¦ç”¨åˆ°çš„halåº“å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HAL_UART_Transmit_DMA(&amp;huart1,receveData,2);//ç¬¬ä¸€ä¸ªä¸ºä¸²å£ï¼Œç¬¬äºŒä¸ªä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä¸ªä¸ºæ•°ç»„é•¿åº¦</span><br><span class="line"></span><br><span class="line">HAL_UART_Receive_DMA(&amp;huart1,receveData,2);//ç¬¬ä¸€ä¸ªä¸ºä¸²å£ï¼Œç¬¬äºŒä¸ªä¸ºæŒ‡é’ˆï¼Œç¬¬ä¸‰ä¸ªä¸ºæ•°ç»„é•¿åº¦</span><br></pre></td></tr></table></figure><p>å®è·µä¸ä¸Šè¿°ä¸¤ç§æ–¹æ³•ç±»ä¼¼ï¼Œç•¥ã€‚</p><h2 id="å®ç°ä¸å®šé•¿æ•°æ®æ¥æ”¶">å®ç°ä¸å®šé•¿æ•°æ®æ¥æ”¶</h2><p>ä¸»è¦ç”¨åˆ°çš„halåº“å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">__weak void HAL_UARTEx_RxEventCallback(UART_HandleTypeDef *huart, uint16_t Size)</span><br><span class="line">//æ‰€ç”¨çš„ä¸­æ–­å›è°ƒå‡½æ•°</span><br><span class="line"></span><br><span class="line"> HAL_UARTEx_ReceiveToIdle(&amp;huart1,receveData,sizeof(receveData));</span><br><span class="line"> </span><br><span class="line"> HAL_UARTEx_ReceiveToIdle_IT(&amp;huart1,receveData,sizeof(receveData));</span><br><span class="line"> </span><br><span class="line"> HAL_UARTEx_ReceiveToIdle_DMA(&amp;huart1,receveData,sizeof(receveData));</span><br><span class="line"> //ç¬¬ä¸‰ä½æ˜¯æœ€å¤§æ¥æ”¶çš„é•¿åº¦ï¼Œä¸å¤§äºæ•°ç»„é•¿åº¦</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>æ­¤æ–¹å¼ä¸‹DMAçš„ç¼ºç‚¹ï¼šä¼ è¾“è¿‡åŠä¸­æ–­ä¼šè§¦å‘ä¸­æ–­ï¼Œå³å‘é€ä¸€åŠå°±ä¼šæˆªæ–­ã€‚</p><p>é€šè¿‡å–æ¶ˆä½¿èƒ½ä¸²å£ï¼Œå–æ¶ˆä¸­æ–­ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">extern DMA_HandleTypeDef hdma_usart1_rx;</span><br><span class="line">//åœ¨main.hä¸­è¿›è¡Œå®šä¹‰ï¼ˆå¦‚æœå‹¾é€‰äº†ä¸ºæ¯ä¸ªå¤–è®¾ç”Ÿæˆå•ç‹¬çš„.c.hæ–‡ä»¶ï¼‰</span><br><span class="line"></span><br><span class="line">__HAL_DMA_DISABLE_IT(&amp;hdma_usart1_rx,DMA_IT_HT);</span><br><span class="line">//ç¬¬ä¸€ä¸ªä¸ºdmaçš„ä¸²å£ï¼Œåœ¨ä¸­æ–­å¤„ç†å‡½æ•°å’Œmainå‡½æ•°ä¸­éƒ½è¦æ·»åŠ </span><br></pre></td></tr></table></figure><h2 id="ä¸å®šé•¿æ•°æ®æ¥æ”¶ä»£ç ">ä¸å®šé•¿æ•°æ®æ¥æ”¶ä»£ç </h2><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/* USER CODE BEGIN PV */</span><br><span class="line"></span><br><span class="line">uint8_t  receveData[5];</span><br><span class="line"></span><br><span class="line">/* USER CODE END PV */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/* USER CODE BEGIN 0 */</span><br><span class="line"></span><br><span class="line">void HAL_UARTEx_RxEventCallback(UART_HandleTypeDef *huart, uint16_t Size)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    if(huart==&amp;huart1)</span><br><span class="line">&#123;</span><br><span class="line">   HAL_UART_Transmit_DMA(&amp;huart1,receveData,Size);</span><br><span class="line">           HAL_UARTEx_ReceiveToIdle_DMA(&amp;huart1,receveData,sizeof(receveData));</span><br><span class="line">           //æ¯æ¬¡ç»“æŸåéƒ½å¼€å¯æ¥æ”¶</span><br><span class="line">   __HAL_DMA_DISABLE_IT(&amp;hdma_usart1_rx,DMA_IT_HT);</span><br><span class="line">   //å–æ¶ˆä½¿èƒ½</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/* USER CODE END 0 */</span><br><span class="line">...</span><br><span class="line"> /* USER CODE BEGIN 2 */</span><br><span class="line"></span><br><span class="line">           HAL_UARTEx_ReceiveToIdle_DMA(&amp;huart1,receveData,sizeof(receveData));</span><br><span class="line">           //å¼€å¯ç¬¬ä¸€æ¬¡æ¥æ”¶</span><br><span class="line">          __HAL_DMA_DISABLE_IT(&amp;hdma_usart1_rx,DMA_IT_HT);//å–æ¶ˆä½¿èƒ½</span><br><span class="line"></span><br><span class="line">  /* USER CODE END 2 */</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1>ä¸»è¦å‚è€ƒèµ„æº</h1><p>1.<a href="https://blog.csdn.net/u013407012/article/details/102465403?ops_request_misc=%7B%22request%5Fid%22%3A%22171997361916800188521398%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&amp;request_id=171997361916800188521398&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-102465403-null-null.142%5Ev100%5Epc_search_result_base4&amp;utm_term=%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1stm32&amp;spm=1018.2226.3001.4187">ã€STM32ã€‘ä¸²å£é€šä¿¡åŸºæœ¬åŸç†ï¼ˆè¶…åŸºç¡€ã€è¯¦ç»†ç‰ˆï¼‰_stm32ä¸²å£é€šä¿¡å·¥ä½œåŸç†-CSDNåšå®¢</a></p><p>2.<a href="https://www.bilibili.com/video/BV1Na4y1T7VQ/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€keyskingçš„STM32æ•™ç¨‹ã€‘ ç¬¬8é›† STM32çš„ä¸²å£é€šä¿¡_å“”å“©å“”å“©_bilibili</a></p><p>3.<a href="https://www.bilibili.com/video/BV1bc411J7Tv/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€STM32å…¥é—¨æ•™ç¨‹-2024ã€‘ç¬¬9é›† STM32ä¸²å£åŸç†ä¸ä¸²å£ä¸­æ–­æ¨¡å¼æ”¶å‘ | keyskingçš„stm32æ•™ç¨‹_å“”å“©å“”å“©_bilibili</a></p><p>4.<a href="https://www.bilibili.com/video/BV1do4y1F7wt/?spm_id_from=333.788&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">ã€å·¥ä½œSTM32ã€‘ç¬¬10é›† STM32ä¸²å£DMAæ¨¡å¼ä¸æ”¶å‘ä¸å®šé•¿æ•°æ® | keyskingçš„stm32æ•™ç¨‹_å“”å“©å“”å“©_bilibili</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆä¸‰ï¼‰å¤–éƒ¨ä¸­æ–­</title>
      <link href="/2024/05/01/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD/"/>
      <url>/2024/05/01/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€äº›å‰ç½®çŸ¥è¯†">ä¸€äº›å‰ç½®çŸ¥è¯†</h2><h3 id="å†…éƒ¨åŸç†ç®€ä»‹">å†…éƒ¨åŸç†ç®€ä»‹</h3><p>é¦–å…ˆä¿¡å·è¿›å…¥è¾“å…¥é©±åŠ¨å™¨ï¼Œè¯¦æƒ…è§ä¸Šä¸€ç¯‡æ–‡ç« ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021507259.png" alt="è¾“å…¥é©±åŠ¨å™¨" style="zoom:80%;"><p>ä¿¡å·è¿›å…¥åé¡ºåºå¦‚ä¸‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021507544.png" alt="è¾¹è·¯æ£€æµ‹ç”µè·¯" style="zoom: 67%;"><p><strong>è¾¹è·¯æ£€æµ‹ç”µè·¯</strong>ï¼šä¿¡å·è¿›æ¥é¦–å…ˆç»è¿‡ä¸Šå‡ä¸‹é™é€‰æ‹©å¯„å­˜å™¨ï¼Œç”±CubeMxè¿›è¡Œé…ç½®ã€‚ç¬¬ä¸€ä¸ªå³ä¸ºå¯„å­˜å™¨çš„é…ç½®ã€‚ç¬¬äºŒä¸ªä¸ºè¾“å…¥ä¿¡å·ä¸Šæ‹‰ä¸‹æ‹‰çš„é…ç½®ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021507150.png" alt="ä¸Šæ‹‰ä¸‹æ‹‰å¤„ç†ä¸­æ–­" style="zoom: 33%;"><p>æ¥ç€ï¼Œç»è¿‡ä¸€ä¸ªæˆ–é—¨ã€‚</p><p><strong>è½¯ä»¶ä¸­æ–­å¯„å­˜å™¨</strong>ï¼šæ¨¡æ‹Ÿäº§ç”Ÿä¸­æ–­ï¼Œç”¨å¤„å¯æš‚æ—¶å¿½ç•¥ã€‚</p><p><strong>äº‹ä»¶å±è”½å¯„å­˜å™¨</strong>ï¼šéç›¸å…³çŸ¥è¯†ï¼Œä¹‹åäº†è§£ã€‚</p><p>è¾“å…¥åï¼Œ</p><p><strong>è¯·æ±‚æŒ‚èµ·å¯„å­˜å™¨</strong>ï¼šç›¸åº”ä½ç½®å˜ä¸ºâ€™1â€™,å³è¾“å…¥é«˜ç”µå¹³ä¿¡å·ã€‚</p><p><strong>ä¸­æ–­å±è”½å¯„å­˜å™¨</strong>ï¼šCubeMxå·²é…ç½®å¥½ã€‚</p><p>ç»è¿‡ä¸é—¨ï¼Œè¿›å…¥NVICã€‚</p><p>NVICä¸»è¦æŒç®¡ä¸­æ–­å‘é‡è¡¨ã€‚ä¸»è¦ç”±æŠ¢å ä¼˜å…ˆçº§å’Œå“åº”ä¼˜å…ˆçº§ã€‚ä¸»è¦è§„åˆ™å¦‚ä¸‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021507436.png" style="zoom: 33%;"><p>å› æ­¤ï¼Œå¦‚è¦åœ¨ä¸­æ–­å¤„ç†å‡½æ•°ä¸­ä½¿ç”¨HAL_DELAYï¼Œéœ€è¦çº¿é…ç½®â€œæ—¶é’Ÿæ»´ç­”â€çš„ä¼˜å…ˆçº§ï¼Œæ‰å¯æ‰“æ–­ä¸­æ–­ï¼Œå®ç°å»¶æ—¶ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021507652.png" alt="è®¾ç½®ä¼˜å…ˆçº§" style="zoom: 67%;"><h2 id="ä»£ç å®è·µ">ä»£ç å®è·µ</h2><h3 id="å¤–éƒ¨ä¸­æ–­å®ç°æ‘é”®æ§åˆ¶äº®ç­">å¤–éƒ¨ä¸­æ–­å®ç°æ‘é”®æ§åˆ¶äº®ç­</h3><p>åœ¨stm32f103xx_it.cä¸­è¿›è¡Œæ”¹å†™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">void EXTI9_5_IRQHandler(void)</span><br><span class="line">&#123;</span><br><span class="line">  /* USER CODE BEGIN EXTI9_5_IRQn 0 */</span><br><span class="line">  </span><br><span class="line">HAL_Delay(10);</span><br><span class="line">if(HAL_GPIO_ReadPin(KEY_GPIO_Port ,KEY_Pin)==GPIO_PIN_RESET)&#123;</span><br><span class="line">HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);</span><br><span class="line">&#125;//å®ç°æ‘é”®æ‘ä¸‹ï¼Œå°ç¯ç¿»è½¬äº®ç­</span><br><span class="line"></span><br><span class="line">  /* USER CODE END EXTI9_5_IRQn 0 */</span><br><span class="line">  HAL_GPIO_EXTI_IRQHandler(KEY_Pin);</span><br><span class="line">  /* USER CODE BEGIN EXTI9_5_IRQn 1 */</span><br><span class="line"></span><br><span class="line">  /* USER CODE END EXTI9_5_IRQn 1 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›å‚è€ƒèµ„æº">ä¸€äº›å‚è€ƒèµ„æº</h2><p>1.ã€keyskingçš„STM32æ•™ç¨‹ã€‘ ç¬¬7é›† æ·±å…¥è®²è§£STM32ä¸­æ–­_å“”å“©å“”å“©_bilibili</p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32å­¦ä¹ ï¼ˆäºŒï¼‰GPIO</title>
      <link href="/2024/04/06/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89GPIO/"/>
      <url>/2024/04/06/STM32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89GPIO/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€äº›å‰å¤‡çŸ¥è¯†">ä¸€äº›å‰å¤‡çŸ¥è¯†</h2><h3 id="ä¸¤ç§MOSç®¡">ä¸¤ç§MOSç®¡</h3><p>é¦–å…ˆï¼Œåœ¨ç¿»é˜…ä¸€äº›Bç«™ä¸Šçš„è§†é¢‘åï¼Œæˆ‘å‘ç°å¤§éƒ¨åˆ†GPIOéƒ½è®²åˆ°äº†å…¶å†…éƒ¨ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021522441.png" alt="GPIO"></p><p>ç”±äºæœ¬äººæ²¡å­¦è¿‡æ¨¡ç”µæ•°ç”µï¼Œæ•…ä¸äº†è§£mosç®¡ï¼ŒæŸ¥é˜…åï¼Œäº†è§£åå¤§è‡´å¦‚ä¸‹ ï¼š</p><p>1.åˆ†ä¸ºp moså’Œn mosï¼Œä¸¤ç§åŒºåˆ«ä»…ä¸ºåº•ä¸‹çš„åŠå¯¼ä½“ä¸åŒï¼ŒPå‹çš„æ˜¯ä»¥på‹ä¸ºè¡¬åº•ï¼ŒNå‹åŒç†ã€‚nå‹åŠå¯¼ä½“æ˜¯ç¡…æº5ä»·ç£·ï¼Œpæº3ä»·ç¡¼ã€‚æ•…å‰è€…å¸¦ç”µå­ï¼Œåè€…æœ‰ç©ºç©´ã€‚</p><p>2.n mosç®¡å®é™…ä¸Šæ˜¯ç”±ä¸¤ä¸ªåŠå¯¼ä½“ç»„æˆï¼Œå†åŠ ä¸Šä¸€ä¸ªæ …æ ¼æ¥æ§åˆ¶å¯¼é€šï¼ˆå¦‚æœæ²¡æœ‰æ …æ ¼ï¼Œåˆ™æ— è®ºæ­£åå‘å‡å¯¼é€šä¸äº†ï¼‰ï¼Œæ …æ ¼é€šç”µï¼Œå¸å¼•ç”µå­ï¼ŒæŒ¤æ‰ç©ºç©´ï¼Œå½¢æˆnæ²Ÿé“ï¼Œå¯¼é€šã€‚på‹åä¹‹ã€‚ç®­å¤´ä»£è¡¨ç”µå­ç§»åŠ¨æ–¹å‘ã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021522092.png" alt="ä¸¤ç§MOSç®¡"></p><p>3.n moséœ€è¦è¾¾åˆ°ä¸€å®šç”µå‹æ‰å¯å¯¼é€šï¼Œpåˆ™éœ€è¦å°äºä¸€å®šç”µå‹ã€‚</p><h3 id="ä¸Šæ‹‰ç”µé˜»å’Œä¸‹æ‹‰ç”µé˜»">ä¸Šæ‹‰ç”µé˜»å’Œä¸‹æ‹‰ç”µé˜»</h3><p>1.è®¾ç½®ä¸Šæ‹‰ç”µé˜»ï¼Œæ§åˆ¶é»˜è®¤ä¸ºé«˜ç”µå‹ï¼Œå½“å¤–éƒ¨ç”µè·¯ä¸ºä½ç”µå‹ï¼Œäº§ç”Ÿæ•°å­—ä¿¡å·ï¼Œè¯»å–æ•°æ®ã€‚</p><p>2.è®¾ç½®ä¸‹æ‹‰ç”µé˜»ï¼Œæ§åˆ¶é»˜è®¤ä¸ºä½ç”µå‹ï¼Œå½“å¤–éƒ¨ç”µè·¯ä¸ºé«˜ç”µå‹ï¼Œäº§ç”Ÿæ•°å­—ä¿¡å·ï¼Œè¯»å–æ•°æ®ã€‚</p><h3 id="TTLè‚–ç‰¹åŸºè§¦å‘å™¨ï¼ˆæ–½å¯†ç‰¹è§¦å‘å™¨ï¼‰">TTLè‚–ç‰¹åŸºè§¦å‘å™¨ï¼ˆæ–½å¯†ç‰¹è§¦å‘å™¨ï¼‰</h3><p>è®¾ç½®é˜ˆå€¼ç”µå‹ï¼Œæ¶ˆé™¤ç”µå‹çš„æ³¢åŠ¨å½±å“ï¼Œå°†å›¾å½¢å˜åŒ–å˜ä¸ºæ•°å­—å˜åŒ–ï¼ˆ01å˜åŒ–ï¼‰ã€‚</p><h2 id="GPIOçš„å…«ç§æ¨¡å¼">GPIOçš„å…«ç§æ¨¡å¼</h2><p>ï¼ˆ1ï¼‰æ¨¡æ‹Ÿè¾“å…¥:ç›´æ¥è¯»å–å…·ä½“ç”µå‹å€¼ï¼Œä¸Šæ‹‰ä¸‹æ‹‰æ–­å¼€</p><p>ï¼ˆ2ï¼‰ä¸Šæ‹‰è¾“å…¥ï¼šä¸Šæ‹‰ç”µé˜»é—­åˆ</p><p>ï¼ˆ3ï¼‰ä¸‹æ‹‰è¾“å…¥ï¼šä¸‹æ‹‰ç”µé˜»é—­åˆ</p><p>ï¼ˆ4ï¼‰å¤ç”¨åŠŸèƒ½è¾“å…¥ï¼šä¸€äº›å¤–éƒ¨æ¨¡å—çš„è¾“å‡ºï¼Œå¦‚ä¸²å£æ¨¡å—</p><p>ï¼ˆ5ï¼‰æ¨æŒ½è¾“å‡ºï¼šèŠ¯ç‰‡è‡ªèº«æä¾›ç”µæº</p><p><img src="https://cdn.jsdelivr.net/gh/Peter-QY/photoResourse/images/202407021522463.png" alt="æ¨æŒ½å’Œå¼€æ¼"></p><p>ï¼ˆ6ï¼‰å¼€æ¼è¾“å‡ºï¼šå¤–æ¥æä¾›ç”µæº</p><p>ï¼ˆ7ï¼‰å¤ç”¨æ¨æŒ½è¾“å‡ºï¼šå¤–è®¾æ¨¡å—ï¼Œä¸²å£ã€iiicç­‰</p><p>ï¼ˆ8ï¼‰å¤ç”¨å¼€æ¼è¾“å‡ºï¼šåŒä¸Š</p><h2 id="GPIOç›¸åº”çš„HALåº“å‡½æ•°">GPIOç›¸åº”çš„HALåº“å‡½æ•°</h2><p>GPIO_Mode_AIN æ¨¡æ‹Ÿè¾“å…¥</p><p>GPIO_Mode_IN_FLOATING æµ®ç©ºè¾“å…¥</p><p>GPIO_Mode_IPD ä¸‹æ‹‰è¾“å…¥</p><p>GPIO_Mode_IPU ä¸Šæ‹‰è¾“å…¥</p><p>GPIO_Mode_Out_OD å¼€æ¼è¾“å‡º</p><p>GPIO_Mode_Out_PP æ¨æŒ½è¾“å‡º</p><p>GPIO_Mode_AF_OD å¤ç”¨å¼€æ¼è¾“å‡º</p><p>GPIO_Mode_AF_PP å¤ç”¨æ¨æŒ½è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HAL_GPIO_Init(GPIO_TypeDef *GPIOx, GPIO_InitTypeDef *GPIO_Init);           #åˆå§‹IOå£çŠ¶æ€      </span><br><span class="line"></span><br><span class="line">HAL_GPIO_DeInit(GPIO_TypeDef *GPIOx, uint32_t GPIO_Pin);                   #é‡ç½®IOå£çŠ¶æ€ </span><br><span class="line"></span><br><span class="line">HAL_GPIO_ReadPin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);                  #è¯»å–IOå£çŠ¶æ€ </span><br><span class="line"></span><br><span class="line">HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState);  #è®¾ç½®IOå£çŠ¶æ€ </span><br><span class="line"></span><br><span class="line">*PinStateï¼šGPIO ç«¯å£è¾“å‡ºçš„çŠ¶æ€ï¼Œå¯ä»¥æ˜¯ GPIO_PIN_RESET æˆ– GPIO_PIN_SET     </span><br><span class="line"></span><br><span class="line">HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);         #è½¬æ¢IOå£çŠ¶æ€      </span><br><span class="line"></span><br><span class="line">HAL_GPIO_LockPin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);                   #é”å®šIOå£çŠ¶æ€</span><br><span class="line"></span><br><span class="line">HAL_Delay()                                                                 #()å¡«æ¯«ç§’æ•°</span><br></pre></td></tr></table></figure><h2 id="å®è·µledç‚¹äº®-æœ‰æºèœ‚é¸£å™¨çš„å‘éŸ³">å®è·µledç‚¹äº®/æœ‰æºèœ‚é¸£å™¨çš„å‘éŸ³</h2><p>Cubemxå¯¹åº”å¼•è„šè®¾ç½®GPIO_Output,ç”Ÿæˆä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">while (1)</span><br><span class="line"> &#123;</span><br><span class="line">   /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">   /* USER CODE BEGIN 3 */</span><br><span class="line"></span><br><span class="line">     HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState);  #å¡«å…¥ä½ çš„IOå£åŠå¯¹åº”çŠ¶æ€</span><br><span class="line">     HAL_Delay(500);</span><br><span class="line">     HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState);  #å¡«å…¥ä½ çš„IOå£åŠå¯¹åº”ç›¸åçŠ¶æ€</span><br><span class="line">     HAL_Delay(500);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½ å¯ä»¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">while (1)</span><br><span class="line"> &#123;</span><br><span class="line">   /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">   /* USER CODE BEGIN 3 */</span><br><span class="line"></span><br><span class="line">    HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);           #å¡«å…¥ä½ çš„IOå£åŠå¯¹åº”çŠ¶æ€</span><br><span class="line">     HAL_Delay(500);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>åˆ™å¯ä»¥å®ç°ledçš„é—ªçƒå’Œèœ‚é¸£å™¨çš„å‘éŸ³ã€‚</p><h2 id="æ‘é”®çš„æ§åˆ¶-å…‰æ•ä¼ æ„Ÿå™¨çš„ä¼ æ„Ÿ">æ‘é”®çš„æ§åˆ¶/å…‰æ•ä¼ æ„Ÿå™¨çš„ä¼ æ„Ÿ</h2><p>Cubemxå¯¹åº”å¼•è„šè®¾ç½®GPIO_INput,ç”Ÿæˆä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">while (1)</span><br><span class="line"> &#123;</span><br><span class="line">   /* USER CODE END WHILE */</span><br><span class="line"></span><br><span class="line">   /* USER CODE BEGIN 3 */</span><br><span class="line">   </span><br><span class="line">    HAL_GPIO_ReadPin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);           #å¡«å…¥ä½ çš„IOå£</span><br><span class="line">    </span><br><span class="line">    if(HAL_GPIO_ReadPin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin)==GPIO_PIN_RESET)</span><br><span class="line">    &#123;</span><br><span class="line">    </span><br><span class="line">       HAL_Delay(10);   #å»¶æ—¶æ¶ˆæŠ–     </span><br><span class="line">       </span><br><span class="line">         if(HAL_GPIO_ReadPin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin)==GPIO_PIN_RESET)  #ç®€å•çš„æ‘é”®æ¶ˆæŠ–</span><br><span class="line">          &#123;</span><br><span class="line">            #æ‘é”®/å…‰æ•ä¼ æ„Ÿå™¨æ‰€æ§åˆ¶çš„æ¨¡å—</span><br><span class="line">          &#125;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å…‰æ•æ¨¡å—å¼•è„šè¯´æ˜</span><br><span class="line"></span><br><span class="line">VCCï¼šç”µæºå¼•è„šï¼Œæ¥å•ç‰‡æœº+5Væˆ–è€…3.3Vã€‚</span><br><span class="line">GNDï¼šåœ°çº¿ï¼Œæ¥å•ç‰‡æœºGNDã€‚</span><br><span class="line">DOï¼šå¼€å…³é‡è¾“å‡ºï¼ˆ0æˆ–1ï¼‰ï¼Œæ¨¡å—åœ¨æ— å…‰æ¡ä»¶ä¸‹æˆ–å…‰å¼ºè¾¾ä¸åˆ°è®¾å®šé˜ˆå€¼æ—¶ï¼ŒDOå£è¾“å‡ºé«˜ç”µå¹³ï¼›å½“å¤–ç•Œç¯å¢ƒå…‰å¼ºè¶…è¿‡è®¾å®šé˜ˆå€¼æ—¶ï¼ŒDOè¾“å‡ºä½ç”µå¹³ã€‚</span><br><span class="line">AOï¼šæ¨¡æ‹Ÿé‡è¾“å‡ºï¼ˆç”µå‹ï¼‰ï¼Œä¸å•ç‰‡æœºADæ¨¡å—ç›¸è¿ï¼Œé€šè¿‡ADè½¬æ¢ï¼Œè·å¾—å‡†ç¡®æ•°å€¼ã€‚ï¼ˆåç»­ä¸­ä½¿ç”¨PA1å¼•è„šä½œä¸ºADCè½¬æ¢ï¼Œå› æ­¤æ­¤å¤„æ¥å•ç‰‡æœºçš„PA1å¼•è„šï¼‰</span><br></pre></td></tr></table></figure><p>æ•…åªèƒ½å®ç°å…‰ä¿¡å·ç®€å•çš„æ§åˆ¶ã€‚</p><h2 id="ä¸»è¦å‚è€ƒèµ„æº">ä¸»è¦å‚è€ƒèµ„æº</h2><p>1.<a href="https://www.bilibili.com/video/BV1th411z7sn?p=8&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">Bç«™æ±Ÿç§‘å¤§stm32  P5-8</a></p><p>2.<a href="https://www.bilibili.com/video/BV1mU421o7vt/?spm_id_from=333.337.search-card.all.click&amp;vd_source=d8d57f27fe1616d3699698e41773e81c">Bç«™keysking</a></p><p>3.<a href="https://www.bilibili.com/video/BV1344y167qm?spm_id_from=333.880.my_history.page.click">Bç«™çˆ±ä¸ŠåŠå¯¼ä½“</a></p><p>4.<a href="https://www.bilibili.com/video/BV1bt4y177E8?spm_id_from=333.880.my_history.page.click">ç»´åº“ç”µå­å¸‚åœºç½‘</a></p><p>5.<a href="https://blog.csdn.net/weixin_58632615/article/details/124729997?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=stm32hal%E5%BA%93%E5%85%89%E6%95%8F&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~sobaiduweb~default-6-124729997.nonecase&amp;spm=1018.2226.3001.4450">CSDN xiangâ€“ying</a></p><p>6.<a href="https://blog.csdn.net/qq_41968464/article/details/126856223?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171240583816800222891676%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171240583816800222891676&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-126856223-null-null.142%5Ev100%5Epc_search_result_base4&amp;utm_term=stm32hal%E5%BA%93%E5%85%89%E6%95%8F&amp;spm=1018.2226.3001.4187">CSDN ç¼–å·09527</a></p><p>7.stm32å®˜æ–¹å›ºä»¶å‚è€ƒæ‰‹å†Œ ã€stm32ä¸­æ–‡å‚è€ƒæ‰‹å†Œ</p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stm32å­¦ä¹ ï¼ˆä¸€ï¼‰åºè¨€</title>
      <link href="/2024/04/05/stm32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%BA%8F%E8%A8%80/"/>
      <url>/2024/04/05/stm32%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%BA%8F%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h2 id="å­¦ä¹ stm32çš„åˆè¡·">å­¦ä¹ stm32çš„åˆè¡·</h2><p>ç”±äºæˆ‘å‚åŠ äº†è¶³åŸºçš„æ˜¥æ‹›ï¼Œé“©ç¾½è€Œå½’ï¼Œå‘ç°ä¹‹å‰æ‰€å­¦ä¸æˆä½“ç³»ï¼Œæ•…ä»¥å†™åšå®¢çš„æ–¹å¼æ¥æ¢³ç†çŸ¥è¯†ï¼Œå¸Œæœ›å¯ä»¥åœ¨stm32ä¸Šæœ‰äº›è®¸æ”¶è·ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
